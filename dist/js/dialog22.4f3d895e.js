(self["webpackChunkcluster_log_extension"]=self["webpackChunkcluster_log_extension"]||[]).push([[9019],{4411:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var a=o(31601),l=o.n(a),i=o(76314),r=o.n(i),d=o(5111),n=r()(l());n.i(d.A),n.push([e.id,".prompt-rotate[data-v-b8259e76]{margin:0}.card-title h4[data-v-b8259e76]{margin-bottom:0}.buttons[data-v-b8259e76]{display:flex;justify-content:flex-end;width:100%}",""]);const s=n},72561:(e,t,o)=>{var a=o(4411);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var l=o(99548).A;l("c7c84186",a,!0,{sourceMap:!1,shadowMode:!1})},97330:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>f});var a=o(20641),l=o(90033);const i={class:"text-default-text"},r={class:"pl-10 pr-10"},d={class:"buttons"};function n(e,t,o,n,s,u){const c=(0,a.g2)("RadioGroup"),b=(0,a.g2)("UnitInput"),m=(0,a.g2)("Banner"),p=(0,a.g2)("AsyncButton"),h=(0,a.g2)("Card");return(0,a.uX)(),(0,a.Wv)(h,{class:"prompt-rotate","show-highlight-border":!1},{title:(0,a.k6)(()=>[(0,a.Lk)("h4",i,[o.kubeNodes.length>1?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)((0,l.v_)(e.t("drainNode.titleMultiple",{count:o.kubeNodes.length})),1)],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)((0,l.v_)(e.t("drainNode.titleOne",{name:o.kubeNodes[0]?.name},!0)),1)],64))])]),body:(0,a.k6)(()=>[(0,a.Lk)("div",r,[(0,a.Lk)("div",null,[(0,a.bF)(c,{value:s.body.deleteLocalData,"onUpdate:value":t[0]||(t[0]=e=>s.body.deleteLocalData=e),name:"deleteLocalData",options:s.radioOptions,row:!0,class:"mb-15"},{label:(0,a.k6)(()=>[(0,a.Lk)("h5",null,(0,l.v_)(e.t("drainNode.deleteLocalData")),1)]),_:1},8,["value","options"]),t[7]||(t[7]=(0,a.eW)()),(0,a.bF)(c,{value:s.body.force,"onUpdate:value":t[1]||(t[1]=e=>s.body.force=e),name:"force",options:s.radioOptions,row:!0,class:"mb-15"},{label:(0,a.k6)(()=>[(0,a.Lk)("h5",null,(0,l.v_)(e.t("drainNode.force")),1)]),_:1},8,["value","options"]),t[8]||(t[8]=(0,a.eW)()),(0,a.bF)(c,{value:s.gracePeriod,"onUpdate:value":t[2]||(t[2]=e=>s.gracePeriod=e),name:"gracePeriod",options:s.gracePeriodOptions,class:"mb-15"},{label:(0,a.k6)(()=>[(0,a.Lk)("h5",null,(0,l.v_)(e.t("drainNode.gracePeriod.title")),1)]),_:1},8,["value","options"]),t[9]||(t[9]=(0,a.eW)()),(0,a.bF)(b,{value:s.body.gracePeriod,"onUpdate:value":t[3]||(t[3]=e=>s.body.gracePeriod=e),mode:s.gracePeriod?s.EDIT:s.VIEW,type:"number",min:"1",suffix:e.t("suffix.sec"),placeholder:e.t("drainNode.gracePeriod.placeholder"),class:"mb-10"},null,8,["value","mode","suffix","placeholder"]),t[10]||(t[10]=(0,a.eW)()),(0,a.bF)(c,{value:s.timeout,"onUpdate:value":t[4]||(t[4]=e=>s.timeout=e),name:"timeout",options:s.timeoutOptions,class:"mb-15"},{label:(0,a.k6)(()=>[(0,a.Lk)("h5",null,(0,l.v_)(e.t("drainNode.timeout.title")),1)]),_:1},8,["value","options"]),t[11]||(t[11]=(0,a.eW)()),(0,a.bF)(b,{value:s.body.timeout,"onUpdate:value":t[5]||(t[5]=e=>s.body.timeout=e),mode:s.timeout?s.EDIT:s.VIEW,type:"number",min:"1",max:"10800",suffix:e.t("suffix.sec"),placeholder:e.t("drainNode.timeout.placeholder")},null,8,["value","mode","suffix","placeholder"])]),t[12]||(t[12]=(0,a.eW)()),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.errors,(e,t)=>((0,a.uX)(),(0,a.Wv)(m,{key:t,color:"error",label:e},null,8,["label"]))),128))])]),actions:(0,a.k6)(()=>[(0,a.Lk)("div",d,[(0,a.Lk)("button",{class:"btn role-secondary mr-10",onClick:t[6]||(t[6]=(...e)=>u.close&&u.close(...e))},(0,l.v_)(e.t("generic.cancel")),1),t[13]||(t[13]=(0,a.eW)()),(0,a.bF)(p,{mode:"drain",onClick:u.apply},null,8,["onClick"])])]),_:1,__:[14,15]})}var s=o(72268),u=o(14492),c=o(40949),b=o(22516),m=o(25563),p=o(46405),h=o(37447);const v={emits:["close"],components:{AsyncButton:s.A,Banner:u.l,Card:c.Z,RadioGroup:b.z,UnitInput:m.A},props:{kubeNodes:{type:Array,default:()=>[]},normanNodeId:{type:String,default:""}},data(){return{radioOptions:[{label:this.t("generic.yes"),value:!0},{label:this.t("generic.no"),value:!1}],gracePeriodOptions:[{label:this.t("drainNode.gracePeriod.default"),value:!1},{label:this.t("drainNode.gracePeriod.custom"),value:!0}],timeoutOptions:[{label:this.t("drainNode.timeout.default"),value:!1},{label:this.t("drainNode.timeout.custom"),value:!0}],gracePeriod:!1,timeout:!1,body:{deleteLocalData:!1,force:!1,gracePeriod:null,timeout:null},EDIT:p.G5,VIEW:p.nW,errors:[]}},watch:{gracePeriod(e){e&&!this.body.gracePeriod&&(this.body.gracePeriod=30)},"body.gracePeriod"(e){e&&e<1&&(this.body["gracePeriod"]=1)},timeout(e){e&&!this.body.timeout&&(this.body.timeout=60)},"body.timeout"(e){e&&(e<1?this.body["timeout"]=1:e>10800&&(this.body["timeout"]=10800))}},methods:{close(){this.$emit("close")},async apply(e){const{gracePeriod:t,timeout:o,...a}=this.body;this.gracePeriod&&(a.gracePeriod=t),this.timeout&&(a.timeout=o);try{await Promise.all(this.kubeNodes.map(e=>e.norman?.doAction("drain",a))),this.close()}catch(l){this.errors=(0,h.rz)(l),e(!1)}}}};o(72561);var g=o(66262);const y=(0,g.A)(v,[["render",n],["__scopeId","data-v-b8259e76"]]),f=y}}]);
//# sourceMappingURL=dialog22.4f3d895e.js.map