(self["webpackChunkcluster_log_extension"]=self["webpackChunkcluster_log_extension"]||[]).push([[7963],{2639:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>g});var s=o(20641),a=o(90033);const r={class:"text-default-text"},l={class:"namespaces"};function c(e,t,o,c,n,i){const d=(0,s.g2)("LabeledSelect"),u=(0,s.g2)("AsyncButton"),p=(0,s.g2)("Card");return(0,s.uX)(),(0,s.Wv)(p,{class:"move-modal-card","show-highlight-border":!1},{title:(0,s.k6)(()=>[(0,s.Lk)("h4",r,(0,a.v_)(e.t("moveModal.title")),1)]),body:(0,s.k6)(()=>[(0,s.Lk)("div",null,[(0,s.eW)((0,a.v_)(e.t("moveModal.description"))+" ",1),(0,s.Lk)("ul",l,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.toMove,(e,t)=>((0,s.uX)(),(0,s.CE)("li",{key:t},(0,a.v_)(e.nameDisplay),1))),128))])]),t[2]||(t[2]=(0,s.eW)()),(0,s.bF)(d,{value:n.targetProject,"onUpdate:value":t[0]||(t[0]=e=>n.targetProject=e),options:i.projectOptions,label:e.t("moveModal.targetProject")},null,8,["value","options","label"])]),actions:(0,s.k6)(()=>[(0,s.Lk)("button",{class:"btn role-secondary",onClick:t[1]||(t[1]=(...e)=>i.close&&i.close(...e))},(0,a.v_)(e.t("generic.cancel")),1),t[3]||(t[3]=(0,s.eW)()),(0,s.bF)(u,{"action-label":e.t("moveModal.moveButtonLabel"),class:"btn bg-primary ml-10",disabled:!n.targetProject,onClick:i.move},null,8,["action-label","disabled","onClick"])]),_:1,__:[4,5]})}var n=o(66278),i=o(40949),d=o(72268),u=o(85158),p=o(55823),h=o(96676);const v={emits:["close"],components:{AsyncButton:d.A,Card:i.Z,LabeledSelect:u.A},props:{resources:{type:Array,default:()=>[]},movingCb:{type:Function,default:()=>{}},registerBackgroundClosing:{type:Function,default:()=>{}}},async fetch(){this.toMove=this.resources,this.projects=await this.$store.dispatch("management/findAll",{type:p.Mc.PROJECT})},data(){return{projects:[],toMove:[],targetProject:null}},computed:{...(0,n.L8)(["currentCluster"]),excludedProjects(){return this.toMove.filter(e=>!!e.project).map(e=>e.project.shortId)},projectOptions(){return this.projects.reduce((e,t)=>(this.excludedProjects.includes(t.shortId)||t.spec?.clusterName!==this.currentCluster.id||e.push({value:t.shortId,label:t.nameDisplay}),e),[])}},methods:{close(e){this.$emit("close",e)},async move(e){const t=this.$store.getters["currentCluster"],o=`${t.id}:${this.targetProject}`,s=this.toMove.map(e=>(e.setLabel(h.yl,this.targetProject),e.setAnnotation(h.yl,o),e.save()));try{await Promise.all(s),e(!0),this.targetProject=null,this.close({performCallback:!0,moveNamespaceCb:!0})}catch(a){e(!1)}}}};o(57789);var m=o(66262);const b=(0,m.A)(v,[["render",c]]),g=b},52591:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>i});var s=o(31601),a=o.n(s),r=o(76314),l=o.n(r),c=o(5111),n=l()(a());n.i(c.A),n.push([e.id,".namespaces{max-height:200px;overflow-y:scroll}.move-modal-card{box-shadow:none;border-radius:var(--border-radius)}.actions{text-align:right}.card-actions{display:flex;justify-content:center}",""]);const i=n},57789:(e,t,o)=>{var s=o(52591);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var a=o(99548).A;a("4db8cf3f",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=dialog44.ebf09ce3.js.map