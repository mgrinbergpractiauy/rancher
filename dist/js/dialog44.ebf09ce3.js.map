{"version":3,"file":"js/dialog44.ebf09ce3.js","mappings":"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","sources":["webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/MoveNamespaceDialog.vue","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/MoveNamespaceDialog.vue?abf8","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/MoveNamespaceDialog.vue?0678","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/MoveNamespaceDialog.vue?9777"],"sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport { Card } from '@components/Card';\nimport AsyncButton from '@shell/components/AsyncButton';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { MANAGEMENT } from '@shell/config/types';\nimport { PROJECT } from '@shell/config/labels-annotations';\n\nexport default {\n  emits: ['close'],\n\n  components: {\n    AsyncButton, Card, LabeledSelect\n  },\n\n  props: {\n    resources: {\n      type:    Array,\n      default: () => []\n    },\n    movingCb: {\n      type:    Function,\n      default: () => {}\n    },\n    registerBackgroundClosing: {\n      type:    Function,\n      default: () => {}\n    }\n  },\n\n  async fetch() {\n    this.toMove = this.resources;\n    this.projects = await this.$store.dispatch('management/findAll', { type: MANAGEMENT.PROJECT });\n  },\n\n  data() {\n    return {\n      projects:      [],\n      toMove:        [],\n      targetProject: null\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n\n    excludedProjects() {\n      return this.toMove.filter((namespace) => !!namespace.project).map((namespace) => namespace.project.shortId);\n    },\n\n    projectOptions() {\n      return this.projects.reduce((inCluster, project) => {\n        if (!this.excludedProjects.includes(project.shortId) && project.spec?.clusterName === this.currentCluster.id) {\n          inCluster.push({\n            value: project.shortId,\n            label: project.nameDisplay\n          });\n        }\n\n        return inCluster;\n      }, []);\n    }\n  },\n\n  methods: {\n    close(data) {\n      this.$emit('close', data);\n    },\n\n    async move(finish) {\n      const cluster = this.$store.getters['currentCluster'];\n      const clusterWithProjectId = `${ cluster.id }:${ this.targetProject }`;\n\n      const promises = this.toMove.map((namespace) => {\n        namespace.setLabel(PROJECT, this.targetProject);\n        namespace.setAnnotation(PROJECT, clusterWithProjectId);\n\n        return namespace.save();\n      });\n\n      try {\n        await Promise.all(promises);\n        finish(true);\n        this.targetProject = null;\n        this.close({ performCallback: true, moveNamespaceCb: true });\n      } catch (ex) {\n        finish(false);\n      }\n    }\n  }\n};\n</script>\n<template>\n  <Card\n    class=\"move-modal-card\"\n    :show-highlight-border=\"false\"\n  >\n    <template #title>\n      <h4 class=\"text-default-text\">\n        {{ t('moveModal.title') }}\n      </h4>\n    </template>\n    <template #body>\n      <div>\n        {{ t('moveModal.description') }}\n        <ul class=\"namespaces\">\n          <li\n            v-for=\"(namespace, i) in toMove\"\n            :key=\"i\"\n          >\n            {{ namespace.nameDisplay }}\n          </li>\n        </ul>\n      </div>\n      <LabeledSelect\n        v-model:value=\"targetProject\"\n        :options=\"projectOptions\"\n        :label=\"t('moveModal.targetProject')\"\n      />\n    </template>\n    <template #actions>\n      <button\n        class=\"btn role-secondary\"\n        @click=\"close\"\n      >\n        {{ t('generic.cancel') }}\n      </button>\n      <AsyncButton\n        :action-label=\"t('moveModal.moveButtonLabel')\"\n        class=\"btn bg-primary ml-10\"\n        :disabled=\"!targetProject\"\n        @click=\"move\"\n      />\n    </template>\n  </Card>\n</template>\n\n<style lang='scss'>\n  .namespaces {\n    max-height: 200px;\n    overflow-y: scroll;\n  }\n\n  .move-modal-card {\n      box-shadow: none;\n\n      border-radius: var(--border-radius);\n  }\n\n  .actions {\n    text-align: right;\n  }\n  .card-actions {\n    display: flex;\n    justify-content: center;\n  }\n</style>\n","import { render } from \"./MoveNamespaceDialog.vue?vue&type=template&id=2b3867a2\"\nimport script from \"./MoveNamespaceDialog.vue?vue&type=script&lang=js\"\nexport * from \"./MoveNamespaceDialog.vue?vue&type=script&lang=js\"\n\nimport \"./MoveNamespaceDialog.vue?vue&type=style&index=0&id=2b3867a2&lang=scss\"\n\nimport exportComponent from \"../../../vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../vue-loader/dist/stylePostLoader.js!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../xterm/css/xterm.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.namespaces{max-height:200px;overflow-y:scroll}.move-modal-card{box-shadow:none;border-radius:var(--border-radius)}.actions{text-align:right}.card-actions{display:flex;justify-content:center}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../vue-loader/dist/stylePostLoader.js!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../vue-loader/dist/index.js??ruleSet[0].use[1]!./MoveNamespaceDialog.vue?vue&type=style&index=0&id=2b3867a2&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4db8cf3f\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["class","title","t","body","toMove","namespace","i","key","nameDisplay","value","targetProject","options","projectOptions","label","actions","close","disabled","move","emits","components","AsyncButton","Card","LabeledSelect","props","resources","type","Array","default","movingCb","Function","registerBackgroundClosing","fetch","this","projects","$store","dispatch","PROJECT","data","computed","excludedProjects","filter","project","map","shortId","reduce","inCluster","includes","spec","clusterName","currentCluster","id","push","methods","$emit","finish","cluster","getters","clusterWithProjectId","promises","setLabel","setAnnotation","save","Promise","all","performCallback","moveNamespaceCb","ex","__exports__","render","___CSS_LOADER_EXPORT___","module","content","__esModule","locals","exports","add"],"ignoreList":[],"sourceRoot":""}