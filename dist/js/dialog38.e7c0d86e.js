(self["webpackChunkcluster_log_extension"]=self["webpackChunkcluster_log_extension"]||[]).push([[9078],{2484:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var l=t(31601),o=t.n(l),r=t(76314),s=t.n(r),i=t(5111),c=s()(o());c.i(i.A),c.push([e.id,".yaml-editor[data-v-ca2b0dd2]{flex:1;min-height:50vh;max-height:50vh}.yaml-editor[data-v-ca2b0dd2]  .code-mirror .CodeMirror{position:static}.yaml-editor[data-v-ca2b0dd2]  .code-mirror .CodeMirror,.yaml-editor[data-v-ca2b0dd2]  .code-mirror .CodeMirror-gutters,.yaml-editor[data-v-ca2b0dd2]  .code-mirror .CodeMirror-scroll{min-height:50vh;max-height:50vh}",""]);const d=c},17905:(e,a,t)=>{var l=t(2484);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var o=t(99548).A;o("82c8e3f2",l,!0,{sourceMap:!1,shadowMode:!1})},31561:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>X});var l=t(20641),o=t(90033);const r={style:{display:"block",width:"100%"}},s={key:0,"data-testid":"import-yaml-success"},i={class:"row"},c={class:"col span-6"},d={class:"col span-6"},n={key:0,class:"results"},m={key:0,class:"text-center",style:{width:"100%"}},u=["aria-label"],p={key:1,class:"text-center",style:{width:"100%"}},h=["aria-label"];function b(e,a,t,b,y,v){const k=(0,l.g2)("FileSelector"),g=(0,l.g2)("LabeledSelect"),C=(0,l.g2)("SortableTable"),w=(0,l.g2)("YamlEditor"),f=(0,l.g2)("Banner"),N=(0,l.g2)("AsyncButton"),_=(0,l.g2)("Card"),A=(0,l.gN)("t");return(0,l.uX)(),(0,l.Wv)(_,{"show-highlight-border":!1,"data-testid":"import-yaml"},{title:(0,l.k6)(()=>[(0,l.Lk)("div",r,[y.done?((0,l.uX)(),(0,l.CE)("h4",s,(0,o.v_)(e.t("import.success",{count:y.rows.length})),1)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.bo)((0,l.Lk)("h4",null,null,512),[[A,"import.title"]]),a[5]||(a[5]=(0,l.eW)()),(0,l.Lk)("div",i,[(0,l.Lk)("div",c,[(0,l.bF)(k,{role:"button","aria-label":e.t("generic.readFromFileArea",{area:e.t("import.title")}),class:"btn role-secondary pull-left",label:e.t("generic.readFromFile"),onSelected:v.onFileSelected},null,8,["aria-label","label","onSelected"])]),a[4]||(a[4]=(0,l.eW)()),(0,l.Lk)("div",d,[(0,l.bF)(g,{value:y.selectedNamespace,"onUpdate:value":a[0]||(a[0]=e=>y.selectedNamespace=e),options:v.namespaceOptions,"label-key":"import.defaultNamespace.label",mode:"edit"},null,8,["value","options"])])])],64))])]),body:(0,l.k6)(()=>[y.done?((0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(C,{rows:y.rows,headers:v.headers,mode:"view","key-field":"_key",search:!1,paging:!0,"row-actions":!1,"table-actions":!1,"sub-rows-description":!1,onRowClick:v.rowClick},null,8,["rows","headers","onRowClick"])])):((0,l.uX)(),(0,l.Wv)(w,{key:1,ref:"yamleditor",value:y.currentYaml,"onUpdate:value":a[1]||(a[1]=e=>y.currentYaml=e),class:"yaml-editor",onOnReady:v.onReadyYamlEditor},null,8,["value","onOnReady"])),a[6]||(a[6]=(0,l.eW)()),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(y.errors,(e,a)=>((0,l.uX)(),(0,l.Wv)(f,{key:a,color:"error",label:e},null,8,["label"]))),128))]),actions:(0,l.k6)(()=>[y.done?((0,l.uX)(),(0,l.CE)("div",m,[(0,l.Lk)("button",{"aria-label":e.t("generic.close"),role:"button",type:"button",class:"btn role-primary","data-testid":"import-yaml-close",onClick:a[2]||(a[2]=(...e)=>v.close&&v.close(...e))},(0,o.v_)(e.t("generic.close")),9,u)])):((0,l.uX)(),(0,l.CE)("div",p,[(0,l.Lk)("button",{"aria-label":e.t("generic.cancel"),role:"button",type:"button",class:"btn role-secondary mr-10","data-testid":"import-yaml-cancel",onClick:a[3]||(a[3]=(...e)=>v.close&&v.close(...e))},(0,o.v_)(e.t("generic.cancel")),9,h),a[7]||(a[7]=(0,l.eW)()),y.done?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(N,{key:0,mode:"import",disabled:!y.currentYaml.length,"data-testid":"import-yaml-import-action","aria-label":e.t("import.title"),onClick:v.importYaml},null,8,["disabled","aria-label","onClick"]))]))]),_:1,__:[8,9]})}var y=t(66278),v=t(40949),k=t(14492),g=t(43556),C=t(2779),w=t(72268),f=t(85158),N=t(91403),_=t(18561),A=t(37447),E=t(55823),F=t(31645);const Y={emits:["close","onReadyYamlEditor"],components:{AsyncButton:w.A,Banner:k.l,Card:v.Z,YamlEditor:g.A,FileSelector:C.A,LabeledSelect:f.A,SortableTable:N.A},props:{defaultNamespace:{type:String,default:void 0}},async fetch(){if(this.allNamespaces=await this.$store.dispatch("cluster/findAll",{type:E.CU,opt:{url:"namespaces"}})||[],void 0===this.selectedNamespace){const e="default",a=this.allNamespaces.some(a=>a.name===e);this.selectedNamespace=a?e:this.allNamespaces[0]?.name}},data(){return{currentYaml:"",allNamespaces:[],errors:null,rows:null,done:!1,selectedNamespace:this.defaultNamespace}},computed:{...(0,y.L8)(["currentCluster"]),namespaceOptions(){const e=this.allNamespaces.map(e=>({label:e.name,value:e.name}));return(0,_.Ul)(e,"label")},headers(){return[F.ZE,F.o_,F.CU,F.K]}},methods:{close(){this.$emit("close")},onFileSelected(e){const a=this.$refs.yamleditor;a&&(this.errors=null,a.updateValue(e))},async importYaml(e){try{this.errors=[];const a=await this.currentCluster.doAction("apply",{yaml:this.currentYaml,defaultNamespace:this.selectedNamespace});e(!0),this.rows=a,this.done=!0}catch(a){this.errors=(0,A.rz)(a),this.done=!1,e(!1)}},rowClick(e){"A"===e.target.tagName&&this.close()},onReadyYamlEditor(e){this.$emit("onReadyYamlEditor",e)}}};t(17905);var S=t(66262);const L=(0,S.A)(Y,[["render",b],["__scopeId","data-v-ca2b0dd2"]]),X=L}}]);
//# sourceMappingURL=dialog38.e7c0d86e.js.map