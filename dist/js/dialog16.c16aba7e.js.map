{"version":3,"file":"js/dialog16.c16aba7e.js","mappings":"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","sources":["webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/DeveloperLoadExtensionDialog.vue","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/DeveloperLoadExtensionDialog.vue?3fe0","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/DeveloperLoadExtensionDialog.vue?7e9c","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/DeveloperLoadExtensionDialog.vue?6e18"],"sourcesContent":["<script>\nimport AsyncButton from '@shell/components/AsyncButton';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\nimport { UI_PLUGIN } from '@shell/config/types';\nimport { UI_PLUGIN_CHART_ANNOTATIONS, UI_PLUGIN_NAMESPACE } from '@shell/config/uiplugins';\n\nexport default {\n  emits: ['close'],\n\n  components: {\n    AsyncButton,\n    Checkbox,\n    LabeledInput\n  },\n  props: {\n    /**\n     * Callback when modal is closed\n     */\n    closed: {\n      type:     Function,\n      default:  () => {},\n      required: true\n    },\n    resources: {\n      type:    Array,\n      default: () => []\n    },\n    registerBackgroundClosing: {\n      type:    Function,\n      default: () => {}\n    }\n  },\n\n  data() {\n    return {\n      name:              '',\n      location:          '',\n      persist:           false,\n      canModifyName:     true,\n      canModifyLocation: true\n    };\n  },\n\n  watch: {\n    name(neu) {\n      if (this.canModifyLocation) {\n        this.location = `/pkg/${ neu }/${ neu }.umd.min.js`;\n      }\n    },\n    location(neu, old) {\n      if (this.canModifyName) {\n        const names = neu.split('/');\n        let last = names[names.length - 1];\n        let index = last.indexOf('.umd.min.js');\n\n        if (index !== -1) {\n          last = last.substr(0, index);\n        } else {\n          index = last.indexOf('.umd.js');\n          if (index !== -1) {\n            last = last.substr(0, index);\n          }\n        }\n\n        this.name = last;\n      }\n    }\n  },\n\n  methods: {\n    closeDialog(result) {\n      this.closed(result);\n      this.$emit('close');\n    },\n\n    updateName(v) {\n      this.canModifyName = v.length === 0;\n    },\n\n    updateLocation(v) {\n      this.canModifyLocation = v.length === 0;\n    },\n\n    async loadPlugin(btnCb) {\n      let name = this.name;\n      const url = this.location;\n\n      if (!name) {\n        const parts = url.split('/');\n        const n = parts[parts.length - 1];\n\n        // Split on '.'\n        name = n.split('.')[0];\n      }\n\n      // Try and parse version number from the name\n      let version = '0.0.1';\n      let crdName = name;\n\n      const parts = name.split('-');\n\n      if (parts.length >= 2) {\n        version = parts.pop();\n        crdName = parts.join('-');\n      }\n\n      if (this.persist) {\n        const pluginCR = await this.$store.dispatch('management/create', {\n          type:     UI_PLUGIN,\n          metadata: {\n            name,\n            namespace: UI_PLUGIN_NAMESPACE\n          },\n          spec: {\n            plugin: {\n              name:     crdName,\n              version,\n              endpoint: url,\n              noCache:  true,\n              metadata: {\n                developer:                                        'true',\n                direct:                                           'true',\n                [UI_PLUGIN_CHART_ANNOTATIONS.EXTENSIONS_VERSION]: '>= 3',\n              },\n              noAuth: true\n            }\n          }\n        });\n\n        try {\n          await pluginCR.save({ url: `/v1/${ UI_PLUGIN }`, method: 'POST' });\n        } catch (e) {\n          console.error('Could not create CRD for plugin', e); // eslint-disable-line no-console\n          btnCb(false);\n        }\n      }\n\n      this.$plugin.loadAsync(name, url).then(() => {\n        this.closeDialog(true);\n\n        this.$store.dispatch('growl/success', {\n          title:   this.t('plugins.success.title', { name }),\n          message: this.t('plugins.success.message'),\n          timeout: 3000,\n        }, { root: true });\n\n        btnCb(true);\n      }).catch((error) => {\n        btnCb(false);\n\n        const message = typeof error === 'object' ? this.t('plugins.error.message') : error;\n\n        this.$store.dispatch('growl/error', {\n          title:   this.t('plugins.error.title'),\n          message,\n          timeout: 5000\n        }, { root: true });\n      });\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"plugin-install-dialog\">\n    <h4>\n      {{ t('plugins.developer.title') }}\n    </h4>\n    <p>\n      {{ t('plugins.developer.prompt') }}\n    </p>\n    <div class=\"custom mt-10\">\n      <div class=\"fields\">\n        <LabeledInput\n          v-model:value=\"location\"\n          v-focus\n          label-key=\"plugins.developer.fields.url\"\n          @update:value=\"updateLocation\"\n        />\n      </div>\n    </div>\n    <div class=\"custom mt-10\">\n      <div class=\"fields\">\n        <LabeledInput\n          v-model:value=\"name\"\n          label-key=\"plugins.developer.fields.name\"\n          @update:value=\"updateName\"\n        />\n      </div>\n      <div class=\"fields mt-10\">\n        <Checkbox\n          v-model:value=\"persist\"\n          label-key=\"plugins.developer.fields.persist\"\n        />\n      </div>\n      <div class=\"dialog-buttons mt-20\">\n        <button\n          class=\"btn role-secondary\"\n          data-testid=\"dev-install-ext-modal-cancel-btn\"\n          @click=\"closeDialog()\"\n        >\n          {{ t('generic.cancel') }}\n        </button>\n        <AsyncButton\n          mode=\"load\"\n          data-testid=\"dev-install-ext-modal-install-btn\"\n          @click=\"loadPlugin\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .plugin-install-dialog {\n    padding: 10px;\n\n    h4 {\n      font-weight: bold;\n    }\n\n    .dialog-panel {\n      display: flex;\n      flex-direction: column;\n      min-height: 100px;\n\n      p {\n        margin-bottom: 5px;\n      }\n\n      .dialog-info {\n        flex: 1;\n      }\n\n      .toggle-advanced {\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n        margin: 10px 0;\n\n        &:hover {\n          text-decoration: none;\n          color: var(--link);\n        }\n      }\n\n      .version-selector {\n        margin: 0 10px 10px 10px;\n        width: auto;\n      }\n    }\n\n    .dialog-buttons {\n      display: flex;\n      justify-content: flex-end;\n      margin-top: 10px;\n\n      > *:not(:last-child) {\n        margin-right: 10px;\n      }\n    }\n  }\n</style>\n","import { render } from \"./DeveloperLoadExtensionDialog.vue?vue&type=template&id=acf0fd8a&scoped=true\"\nimport script from \"./DeveloperLoadExtensionDialog.vue?vue&type=script&lang=js\"\nexport * from \"./DeveloperLoadExtensionDialog.vue?vue&type=script&lang=js\"\n\nimport \"./DeveloperLoadExtensionDialog.vue?vue&type=style&index=0&id=acf0fd8a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-acf0fd8a\"]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../vue-loader/dist/stylePostLoader.js!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../xterm/css/xterm.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.plugin-install-dialog[data-v-acf0fd8a]{padding:10px}.plugin-install-dialog h4[data-v-acf0fd8a]{font-weight:700}.plugin-install-dialog .dialog-panel[data-v-acf0fd8a]{display:flex;flex-direction:column;min-height:100px}.plugin-install-dialog .dialog-panel p[data-v-acf0fd8a]{margin-bottom:5px}.plugin-install-dialog .dialog-panel .dialog-info[data-v-acf0fd8a]{flex:1}.plugin-install-dialog .dialog-panel .toggle-advanced[data-v-acf0fd8a]{display:flex;align-items:center;cursor:pointer;margin:10px 0}.plugin-install-dialog .dialog-panel .toggle-advanced[data-v-acf0fd8a]:hover{text-decoration:none;color:var(--link)}.plugin-install-dialog .dialog-panel .version-selector[data-v-acf0fd8a]{margin:0 10px 10px 10px;width:auto}.plugin-install-dialog .dialog-buttons[data-v-acf0fd8a]{display:flex;justify-content:flex-end;margin-top:10px}.plugin-install-dialog .dialog-buttons[data-v-acf0fd8a]>:not(:last-child){margin-right:10px}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../vue-loader/dist/stylePostLoader.js!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../vue-loader/dist/index.js??ruleSet[0].use[1]!./DeveloperLoadExtensionDialog.vue?vue&type=style&index=0&id=acf0fd8a&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"f4ebaeec\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["class","t","value","location","updateLocation","name","updateName","persist","closeDialog","mode","loadPlugin","emits","components","AsyncButton","Checkbox","LabeledInput","props","closed","type","Function","default","required","resources","Array","registerBackgroundClosing","data","canModifyName","canModifyLocation","watch","neu","this","old","names","split","last","length","index","indexOf","substr","methods","result","$emit","v","btnCb","url","parts","n","version","crdName","pop","join","pluginCR","$store","dispatch","metadata","namespace","spec","plugin","endpoint","noCache","developer","direct","EXTENSIONS_VERSION","noAuth","save","method","e","console","error","$plugin","loadAsync","then","title","message","timeout","root","catch","__exports__","render","___CSS_LOADER_EXPORT___","i","push","module","id","content","__esModule","locals","exports","add"],"ignoreList":[],"sourceRoot":""}