{"version":3,"file":"js/5784.f7d68ec0.js","mappings":"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","sources":["webpack://cluster-log-extension/./node_modules/@rancher/shell/pages/c/_cluster/auth/user.retention/index.vue?ab41","webpack://cluster-log-extension/./node_modules/dayjs/plugin/duration.js","webpack://cluster-log-extension/./node_modules/@rancher/shell/pages/c/_cluster/auth/user.retention/index.vue?ea84","webpack://cluster-log-extension/./node_modules/@rancher/shell/components/user.retention/user-retention-header.vue?efbd","webpack://cluster-log-extension/./node_modules/@rancher/shell/components/user.retention/user-retention-header.vue","webpack://cluster-log-extension/./node_modules/@rancher/shell/composables/useUserRetentionValidation.ts","webpack://cluster-log-extension/./node_modules/@rancher/shell/pages/c/_cluster/auth/user.retention/index.vue?77c9","webpack://cluster-log-extension/./node_modules/@rancher/shell/pages/c/_cluster/auth/user.retention/index.vue","webpack://cluster-log-extension/./node_modules/@rancher/shell/pages/c/_cluster/auth/user.retention/index.vue?51d6"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../../../../../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../../../../../vue-loader/dist/stylePostLoader.js!../../../../../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../../../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../../../../../xterm/css/xterm.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.user-retention[data-v-65cf4ee6]{height:100%}.user-retention-content[data-v-65cf4ee6]{height:100%;overflow-y:scroll}.form-user-retention[data-v-65cf4ee6]{display:flex;flex:1;flex-direction:column;gap:1.5rem}.footer-user-retention[data-v-65cf4ee6]{border-top:var(--header-border-size) solid var(--header-border);background-color:var(--header-bg);margin-left:-20px;margin-right:-20px;margin-bottom:-20px;margin-top:20px;padding:10px 20px;height:60px}.footer-user-retention[data-v-65cf4ee6]  .spacer-small{padding:0}.input-fieldset[data-v-65cf4ee6]{display:flex;flex-direction:column;gap:.75rem}.input-fieldset.condensed[data-v-65cf4ee6]{gap:.25rem}.input-fieldset.pt-12[data-v-65cf4ee6]{padding-top:3rem}.input-field[data-v-65cf4ee6]{max-width:24rem}.input-detail[data-v-65cf4ee6]{color:var(--input-label);padding-left:61px}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","!function(t,s){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=s():\"function\"==typeof define&&define.amd?define(s):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs_plugin_duration=s()}(this,(function(){\"use strict\";var t,s,n=1e3,i=6e4,e=36e5,r=864e5,o=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=31536e6,d=2628e6,a=/^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,h={years:u,months:d,days:r,hours:e,minutes:i,seconds:n,milliseconds:1,weeks:6048e5},c=function(t){return t instanceof g},f=function(t,s,n){return new g(t,n,s.$l)},m=function(t){return s.p(t)+\"s\"},l=function(t){return t<0},$=function(t){return l(t)?Math.ceil(t):Math.floor(t)},y=function(t){return Math.abs(t)},v=function(t,s){return t?l(t)?{negative:!0,format:\"\"+y(t)+s}:{negative:!1,format:\"\"+t+s}:{negative:!1,format:\"\"}},g=function(){function l(t,s,n){var i=this;if(this.$d={},this.$l=n,void 0===t&&(this.$ms=0,this.parseFromMilliseconds()),s)return f(t*h[m(s)],this);if(\"number\"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if(\"object\"==typeof t)return Object.keys(t).forEach((function(s){i.$d[m(s)]=t[s]})),this.calMilliseconds(),this;if(\"string\"==typeof t){var e=t.match(a);if(e){var r=e.slice(2).map((function(t){return null!=t?Number(t):0}));return this.$d.years=r[0],this.$d.months=r[1],this.$d.weeks=r[2],this.$d.days=r[3],this.$d.hours=r[4],this.$d.minutes=r[5],this.$d.seconds=r[6],this.calMilliseconds(),this}}return this}var y=l.prototype;return y.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce((function(s,n){return s+(t.$d[n]||0)*h[n]}),0)},y.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=$(t/u),t%=u,this.$d.months=$(t/d),t%=d,this.$d.days=$(t/r),t%=r,this.$d.hours=$(t/e),t%=e,this.$d.minutes=$(t/i),t%=i,this.$d.seconds=$(t/n),t%=n,this.$d.milliseconds=t},y.toISOString=function(){var t=v(this.$d.years,\"Y\"),s=v(this.$d.months,\"M\"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var i=v(n,\"D\"),e=v(this.$d.hours,\"H\"),r=v(this.$d.minutes,\"M\"),o=this.$d.seconds||0;this.$d.milliseconds&&(o+=this.$d.milliseconds/1e3,o=Math.round(1e3*o)/1e3);var u=v(o,\"S\"),d=t.negative||s.negative||i.negative||e.negative||r.negative||u.negative,a=e.format||r.format||u.format?\"T\":\"\",h=(d?\"-\":\"\")+\"P\"+t.format+s.format+i.format+a+e.format+r.format+u.format;return\"P\"===h||\"-P\"===h?\"P0D\":h},y.toJSON=function(){return this.toISOString()},y.format=function(t){var n=t||\"YYYY-MM-DDTHH:mm:ss\",i={Y:this.$d.years,YY:s.s(this.$d.years,2,\"0\"),YYYY:s.s(this.$d.years,4,\"0\"),M:this.$d.months,MM:s.s(this.$d.months,2,\"0\"),D:this.$d.days,DD:s.s(this.$d.days,2,\"0\"),H:this.$d.hours,HH:s.s(this.$d.hours,2,\"0\"),m:this.$d.minutes,mm:s.s(this.$d.minutes,2,\"0\"),s:this.$d.seconds,ss:s.s(this.$d.seconds,2,\"0\"),SSS:s.s(this.$d.milliseconds,3,\"0\")};return n.replace(o,(function(t,s){return s||String(i[t])}))},y.as=function(t){return this.$ms/h[m(t)]},y.get=function(t){var s=this.$ms,n=m(t);return\"milliseconds\"===n?s%=1e3:s=\"weeks\"===n?$(s/h[n]):this.$d[n],s||0},y.add=function(t,s,n){var i;return i=s?t*h[m(s)]:c(t)?t.$ms:f(t,this).$ms,f(this.$ms+i*(n?-1:1),this)},y.subtract=function(t,s){return this.add(t,s,!0)},y.locale=function(t){var s=this.clone();return s.$l=t,s},y.clone=function(){return f(this.$ms,this)},y.humanize=function(s){return t().add(this.$ms,\"ms\").locale(this.$l).fromNow(!s)},y.valueOf=function(){return this.asMilliseconds()},y.milliseconds=function(){return this.get(\"milliseconds\")},y.asMilliseconds=function(){return this.as(\"milliseconds\")},y.seconds=function(){return this.get(\"seconds\")},y.asSeconds=function(){return this.as(\"seconds\")},y.minutes=function(){return this.get(\"minutes\")},y.asMinutes=function(){return this.as(\"minutes\")},y.hours=function(){return this.get(\"hours\")},y.asHours=function(){return this.as(\"hours\")},y.days=function(){return this.get(\"days\")},y.asDays=function(){return this.as(\"days\")},y.weeks=function(){return this.get(\"weeks\")},y.asWeeks=function(){return this.as(\"weeks\")},y.months=function(){return this.get(\"months\")},y.asMonths=function(){return this.as(\"months\")},y.years=function(){return this.get(\"years\")},y.asYears=function(){return this.as(\"years\")},l}(),p=function(t,s,n){return t.add(s.years()*n,\"y\").add(s.months()*n,\"M\").add(s.days()*n,\"d\").add(s.hours()*n,\"h\").add(s.minutes()*n,\"m\").add(s.seconds()*n,\"s\").add(s.milliseconds()*n,\"ms\")};return function(n,i,e){t=e,s=e().$utils(),e.duration=function(t,s){var n=e.locale();return f(t,{$l:n},s)},e.isDuration=c;var r=i.prototype.add,o=i.prototype.subtract;i.prototype.add=function(t,s){return c(t)?p(this,t,1):r.bind(this)(t,s)},i.prototype.subtract=function(t,s){return c(t)?p(this,t,-1):o.bind(this)(t,s)}}}));","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../../../../../vue-loader/dist/stylePostLoader.js!../../../../../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../../../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../../../../../sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../../../../../cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../../../../../vue-loader/dist/index.js??ruleSet[0].use[1]!./index.vue?vue&type=style&index=0&id=65cf4ee6&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"30b25f6a\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","import { defineComponent as _defineComponent } from 'vue'\nimport TabTitle from '@shell/components/TabTitle';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'user-retention-header',\n  setup(__props, { expose: __expose }) {\n  __expose();\n\n\nconst __returned__ = { get TabTitle() { return TabTitle } }\nObject.defineProperty(__returned__, '__isScriptSetup', { enumerable: false, value: true })\nreturn __returned__\n}\n\n})","import script from \"./user-retention-header.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./user-retention-header.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { Ref, ComputedRef, ref, computed } from 'vue';\nimport { useStore } from 'vuex';\n\nimport { SETTING } from '@shell/config/settings';\nimport { useI18n } from '@shell/composables/useI18n';\nimport type { Setting } from '@shell/types/resources/settings';\n\nimport { isValidCron } from 'cron-validator';\nimport dayjs from 'dayjs';\nimport duration from 'dayjs/plugin/duration';\ndayjs.extend(duration);\n\ntype SettingValidation = 'user-retention-cron' | 'disable-inactive-user-after' | 'delete-inactive-user-after';\n\ntype Validation = {\n  [SETTING.DISABLE_INACTIVE_USER_AFTER]?: boolean;\n  [SETTING.DELETE_INACTIVE_USER_AFTER]?: boolean;\n  [SETTING.USER_RETENTION_CRON]?: boolean;\n}\n\ninterface UseUserRetentionValidation {\n  validateUserRetentionCron: (cronSetting: string | null) => string | undefined;\n  validateDisableInactiveUserAfterDuration: (duration: string) => string | undefined;\n  validateDeleteInactiveUserAfterDuration: (duration: string) => string | undefined;\n  validateDeleteInactiveUserAfter: (duration: string) => string | undefined;\n  validateDurationAgainstAuthUserSession: (duration: string) => string | undefined;\n  setValidation: (formField: SettingValidation, isValid: boolean) => void;\n  removeValidation : (setting: SettingValidation) => void;\n  addValidation: (setting: SettingValidation) => void;\n  isFormValid: ComputedRef<boolean>;\n}\n\nclass ExpectedValidationError extends Error {\n  isExpected = true;\n  constructor(message: string) {\n    super(message);\n    this.name = 'ExpectedError';\n  }\n}\n\nexport const useUserRetentionValidation = (disableAfterPeriod: Ref<boolean>, deleteAfterPeriod: Ref<boolean>, authUserSessionTtlMinutes: Ref<Setting | null>): UseUserRetentionValidation => {\n  const store = useStore();\n  const { t } = useI18n(store);\n\n  /**\n   * Tracks the validation state for user retention fields\n   */\n  const validation = ref<Validation>({\n    [SETTING.DISABLE_INACTIVE_USER_AFTER]: true,\n    [SETTING.DELETE_INACTIVE_USER_AFTER]:  true,\n    [SETTING.USER_RETENTION_CRON]:         true,\n  });\n\n  const isFormValid = computed(() => {\n    const validations = validation.value;\n\n    return !Object.values(validations).includes(false);\n  });\n\n  const setValidation = (formField: SettingValidation, isValid: boolean) => {\n    validation.value[formField] = isValid;\n  };\n\n  const removeValidation = (setting: SettingValidation) => {\n    const { [setting]: _, ...rest } = validation.value;\n\n    validation.value = rest;\n  };\n\n  const addValidation = (setting: SettingValidation) => {\n    validation.value = {\n      ...validation.value,\n      [setting]: true,\n    };\n  };\n\n  /**\n   * Takes a duration string and produces a dayjs duration object.\n   * @param duration Duration string in {h|m|s} (e.g. 6h3m2s)\n   * @returns Day.js duration object\n   */\n  const parseDuration = (duration: string) => {\n    const durationPattern = /^(\\d+)h|(\\d+)m|(\\d+)s$/;\n    const match = duration?.match(durationPattern);\n\n    if (!match) {\n      throw new ExpectedValidationError('Invalid duration format. Accepted duration units are Hours, Minutes, and Seconds ({h|m|s})');\n    }\n\n    const hours = match[1] ? parseInt(match[1]) : 0;\n    const minutes = match[2] ? parseInt(match[2]) : 0;\n    const seconds = match[3] ? parseInt(match[3]) : 0;\n\n    return dayjs.duration({\n      hours, minutes, seconds\n    });\n  };\n\n  /**\n   * Asserts that a given string is a valid cron expression\n   * @param cronSetting Cron expression to test\n   * @returns Undefined if cron expression is valid; Error string for an invalid\n   * cron expression.\n   */\n  const validateUserRetentionCron = (cronSetting: string | null): string | undefined => {\n    // Only require user retention cron when disable or delete after are active\n    if (!disableAfterPeriod.value && !deleteAfterPeriod.value) {\n      return;\n    }\n\n    if (\n      !cronSetting ||\n      (typeof cronSetting === 'string' && !isValidCron(cronSetting))\n    ) {\n      return t('user.retention.edit.form.cron.errorMessage');\n    }\n  };\n\n  const validateDisableInactiveUserAfterDuration = (duration: string): string | undefined => {\n    if (!disableAfterPeriod.value) {\n      return;\n    }\n\n    try {\n      parseDuration(duration);\n    } catch (error: any) {\n      return error.message;\n    }\n  };\n\n  const validateDeleteInactiveUserAfterDuration = (duration: string): string | undefined => {\n    if (!deleteAfterPeriod.value) {\n      return;\n    }\n\n    try {\n      parseDuration(duration);\n    } catch (error: any) {\n      return error.message;\n    }\n  };\n\n  /**\n   * Asserts that the provided duration is greater than the default minimum of\n   * 336h\n   * @param duration Duration string in {h|m|s} (e.g. 6h3m2s)\n   * @returns Undefined if duration is valid; Error string for an invalid\n   * duration\n   */\n  const validateDeleteInactiveUserAfter = (duration: string): string | undefined => {\n    try {\n      const inputDuration = parseDuration(duration);\n      const minDuration = dayjs.duration({ hours: 336 });\n\n      if (inputDuration.asMilliseconds() < minDuration.asMilliseconds()) {\n        return `Invalid value: \"${ duration }\": must be at least 336h0m0s`;\n      }\n    } catch (error: any) {\n      if (error instanceof ExpectedValidationError) {\n\n      } else {\n        return error.message;\n      }\n    }\n  };\n\n  /**\n   * Asserts that the provided duration is not less than the user session TTL\n   * @param duration Duration string in {h|m|s} (e.g. 6h3m2s)\n   * @returns Undefined if duration is valid; Error string for an invalid\n   * duration\n   */\n  const validateDurationAgainstAuthUserSession = (duration: string): string | undefined => {\n    try {\n      const inputDuration = parseDuration(duration);\n      const minDuration = dayjs.duration({ minutes: authUserSessionTtlMinutes.value?.value });\n\n      if (inputDuration.asMilliseconds() < minDuration.asMilliseconds()) {\n        return `Invalid value: \"${ duration }\": must be at least ${ SETTING.AUTH_USER_SESSION_TTL_MINUTES } (${ authUserSessionTtlMinutes.value?.value }m)`;\n      }\n    } catch (error: any) {\n      if (error instanceof ExpectedValidationError) {\n\n      } else {\n        return error.message;\n      }\n    }\n  };\n\n  return {\n    validateUserRetentionCron,\n    validateDisableInactiveUserAfterDuration,\n    validateDeleteInactiveUserAfterDuration,\n    validateDeleteInactiveUserAfter,\n    validateDurationAgainstAuthUserSession,\n    setValidation,\n    removeValidation,\n    addValidation,\n    isFormValid,\n  };\n};\n","import { defineComponent as _defineComponent } from 'vue'\nimport { ref, reactive, watch, onMounted } from 'vue';\nimport { useRouter, onBeforeRouteUpdate } from 'vue-router';\n\nimport UserRetentionHeader from '@shell/components/user.retention/user-retention-header.vue';\nimport Footer from '@shell/components/form/Footer.vue';\nimport { useStore } from 'vuex';\nimport { useI18n } from '@shell/composables/useI18n';\nimport { useUserRetentionValidation } from '@shell/composables/useUserRetentionValidation';\nimport { MANAGEMENT } from '@shell/config/types';\nimport { SETTING } from '@shell/config/settings';\nimport { isAdminUser } from '@shell/store/type-map';\n\nimport type { Setting } from '@shell/types/resources/settings';\n\nimport Banner from '@components/Banner/Banner.vue';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\nimport LabeledInput from '@components/Form/LabeledInput/LabeledInput.vue';\nimport { ToggleSwitch } from '@components/Form/ToggleSwitch';\n\nimport dayjs from 'dayjs';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props, { expose: __expose }) {\n  __expose();\n\nconst store = useStore();\nconst userRetentionSettings = reactive<{[id: string]: string | null }>({\n  [SETTING.DISABLE_INACTIVE_USER_AFTER]: null,\n  [SETTING.DELETE_INACTIVE_USER_AFTER]:  null,\n  [SETTING.USER_RETENTION_CRON]:         null,\n  [SETTING.USER_RETENTION_DRY_RUN]:      null,\n  [SETTING.USER_LAST_LOGIN_DEFAULT]:     null,\n});\nconst authUserSessionTtlMinutes = ref<Setting | null>(null);\nconst disableAfterPeriod = ref(false);\nconst deleteAfterPeriod = ref(false);\nconst loading = ref(true);\nconst {\n  validateUserRetentionCron,\n  validateDisableInactiveUserAfterDuration,\n  validateDeleteInactiveUserAfterDuration,\n  validateDeleteInactiveUserAfter,\n  validateDurationAgainstAuthUserSession,\n  setValidation,\n  removeValidation,\n  addValidation,\n  isFormValid,\n} = useUserRetentionValidation(disableAfterPeriod, deleteAfterPeriod, authUserSessionTtlMinutes);\nlet settings: { [id: string]: Setting } = {};\n\n/**\n * Watches the disable after period and removes the value if the checkbox is\n * not selected. Lookup the value when the checkbox is selected.\n */\nwatch(disableAfterPeriod, (newVal) => {\n  if (!newVal) {\n    userRetentionSettings[SETTING.DISABLE_INACTIVE_USER_AFTER] = null;\n\n    return;\n  }\n\n  userRetentionSettings[SETTING.DISABLE_INACTIVE_USER_AFTER] = settings[SETTING.DISABLE_INACTIVE_USER_AFTER].value;\n});\n\n/**\n * Watches the delete after period and removes the value if the checkbox is\n * not selected. Lookup the value when the checkbox is selected.\n */\nwatch(deleteAfterPeriod, (newVal) => {\n  if (!newVal) {\n    userRetentionSettings[SETTING.DELETE_INACTIVE_USER_AFTER] = null;\n\n    return;\n  }\n\n  userRetentionSettings[SETTING.DELETE_INACTIVE_USER_AFTER] = settings[SETTING.DELETE_INACTIVE_USER_AFTER].value;\n});\n\n/**\n * Watches both the disable and delete after periods. Clear all values in\n * the form if both checkboxes are not selected. If one of the checkboxes\n * are selected, lookup each of the values in the form.\n */\nwatch([disableAfterPeriod, deleteAfterPeriod], ([newDisableAfterPeriod, newDeleteAfterPeriod]) => {\n  if (!newDisableAfterPeriod && !newDeleteAfterPeriod) {\n    ids.forEach((key) => {\n      userRetentionSettings[key] = null;\n    });\n\n    removeValidation(SETTING.USER_RETENTION_CRON);\n\n    return;\n  }\n\n  ids.filter((id) => ![SETTING.DISABLE_INACTIVE_USER_AFTER, SETTING.DELETE_INACTIVE_USER_AFTER].includes(id))\n    .forEach(assignSettings);\n\n  addValidation(SETTING.USER_RETENTION_CRON);\n});\n\nconst assignSettings = (key: string) => {\n  if (settings[key].id === SETTING.USER_LAST_LOGIN_DEFAULT && settings[key].value && typeof settings[key].value === 'string') {\n    const value = settings[key].value as string;\n\n    userRetentionSettings[key] = dayjs(value).valueOf().toString();\n\n    return;\n  }\n\n  userRetentionSettings[key] = settings[key].value;\n};\n\nconst fetchSetting = async(id: string) => {\n  return await store.dispatch('management/find', { type: MANAGEMENT.SETTING, id });\n};\n\nconst ids = Object.keys(userRetentionSettings);\nconst settingPromises = ids.map((id) => fetchSetting(id));\n\nonMounted(async() => {\n  settings = await Promise\n    .all(settingPromises)\n    .then((results) => results.reduce((acc, result) => {\n      return {\n        [result.id]: result,\n        ...acc,\n      };\n    }, { }));\n\n  ids.forEach(assignSettings);\n\n  authUserSessionTtlMinutes.value = await fetchSetting(SETTING.AUTH_USER_SESSION_TTL_MINUTES);\n\n  disableAfterPeriod.value = !!userRetentionSettings[SETTING.DISABLE_INACTIVE_USER_AFTER];\n  deleteAfterPeriod.value = !!userRetentionSettings[SETTING.DELETE_INACTIVE_USER_AFTER];\n  loading.value = false;\n});\n\nconst { t } = useI18n(store);\nconst error = ref<string | null>(null);\nconst save = async(btnCB: (arg: boolean) => void) => {\n  try {\n    error.value = null;\n    ids.forEach((key) => {\n      settings[key].value = userRetentionSettings[key];\n\n      if (key === SETTING.USER_LAST_LOGIN_DEFAULT && userRetentionSettings[key]) {\n        settings[key].value = dayjs(Number(userRetentionSettings[key])).format();\n      }\n    });\n\n    await Promise.all(ids.map((setting) => settings[setting].save()));\n\n    btnCB(true);\n    store.dispatch(\n      'growl/success',\n      {\n        title:   t('user.retention.growl.title'),\n        message: t('user.retention.growl.message'),\n      },\n      { root: true }\n    );\n    routeBack();\n  } catch (err) {\n    error.value = (err as Error).message;\n    btnCB(false);\n  }\n};\n\nconst router = useRouter();\nconst routeBack = () => {\n  router.back();\n};\n\nonBeforeRouteUpdate((_to: unknown, _from: unknown) => {\n  if (!isAdminUser(store.getters)) {\n    router.replace({ name: 'home' });\n  }\n});\n\nconst __returned__ = { store, userRetentionSettings, authUserSessionTtlMinutes, disableAfterPeriod, deleteAfterPeriod, loading, validateUserRetentionCron, validateDisableInactiveUserAfterDuration, validateDeleteInactiveUserAfterDuration, validateDeleteInactiveUserAfter, validateDurationAgainstAuthUserSession, setValidation, removeValidation, addValidation, isFormValid, get settings() { return settings }, set settings(v) { settings = v }, assignSettings, fetchSetting, ids, settingPromises, t, error, save, router, routeBack, UserRetentionHeader, Footer, get SETTING() { return SETTING }, Banner, Checkbox, LabeledInput, get ToggleSwitch() { return ToggleSwitch } }\nObject.defineProperty(__returned__, '__isScriptSetup', { enumerable: false, value: true })\nreturn __returned__\n}\n\n})","<script lang=\"ts\" setup>\nimport { ref, reactive, watch, onMounted } from 'vue';\nimport { useRouter, onBeforeRouteUpdate } from 'vue-router';\n\nimport UserRetentionHeader from '@shell/components/user.retention/user-retention-header.vue';\nimport Footer from '@shell/components/form/Footer.vue';\nimport { useStore } from 'vuex';\nimport { useI18n } from '@shell/composables/useI18n';\nimport { useUserRetentionValidation } from '@shell/composables/useUserRetentionValidation';\nimport { MANAGEMENT } from '@shell/config/types';\nimport { SETTING } from '@shell/config/settings';\nimport { isAdminUser } from '@shell/store/type-map';\n\nimport type { Setting } from '@shell/types/resources/settings';\n\nimport Banner from '@components/Banner/Banner.vue';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\nimport LabeledInput from '@components/Form/LabeledInput/LabeledInput.vue';\nimport { ToggleSwitch } from '@components/Form/ToggleSwitch';\n\nimport dayjs from 'dayjs';\n\nconst store = useStore();\nconst userRetentionSettings = reactive<{[id: string]: string | null }>({\n  [SETTING.DISABLE_INACTIVE_USER_AFTER]: null,\n  [SETTING.DELETE_INACTIVE_USER_AFTER]:  null,\n  [SETTING.USER_RETENTION_CRON]:         null,\n  [SETTING.USER_RETENTION_DRY_RUN]:      null,\n  [SETTING.USER_LAST_LOGIN_DEFAULT]:     null,\n});\nconst authUserSessionTtlMinutes = ref<Setting | null>(null);\nconst disableAfterPeriod = ref(false);\nconst deleteAfterPeriod = ref(false);\nconst loading = ref(true);\nconst {\n  validateUserRetentionCron,\n  validateDisableInactiveUserAfterDuration,\n  validateDeleteInactiveUserAfterDuration,\n  validateDeleteInactiveUserAfter,\n  validateDurationAgainstAuthUserSession,\n  setValidation,\n  removeValidation,\n  addValidation,\n  isFormValid,\n} = useUserRetentionValidation(disableAfterPeriod, deleteAfterPeriod, authUserSessionTtlMinutes);\nlet settings: { [id: string]: Setting } = {};\n\n/**\n * Watches the disable after period and removes the value if the checkbox is\n * not selected. Lookup the value when the checkbox is selected.\n */\nwatch(disableAfterPeriod, (newVal) => {\n  if (!newVal) {\n    userRetentionSettings[SETTING.DISABLE_INACTIVE_USER_AFTER] = null;\n\n    return;\n  }\n\n  userRetentionSettings[SETTING.DISABLE_INACTIVE_USER_AFTER] = settings[SETTING.DISABLE_INACTIVE_USER_AFTER].value;\n});\n\n/**\n * Watches the delete after period and removes the value if the checkbox is\n * not selected. Lookup the value when the checkbox is selected.\n */\nwatch(deleteAfterPeriod, (newVal) => {\n  if (!newVal) {\n    userRetentionSettings[SETTING.DELETE_INACTIVE_USER_AFTER] = null;\n\n    return;\n  }\n\n  userRetentionSettings[SETTING.DELETE_INACTIVE_USER_AFTER] = settings[SETTING.DELETE_INACTIVE_USER_AFTER].value;\n});\n\n/**\n * Watches both the disable and delete after periods. Clear all values in\n * the form if both checkboxes are not selected. If one of the checkboxes\n * are selected, lookup each of the values in the form.\n */\nwatch([disableAfterPeriod, deleteAfterPeriod], ([newDisableAfterPeriod, newDeleteAfterPeriod]) => {\n  if (!newDisableAfterPeriod && !newDeleteAfterPeriod) {\n    ids.forEach((key) => {\n      userRetentionSettings[key] = null;\n    });\n\n    removeValidation(SETTING.USER_RETENTION_CRON);\n\n    return;\n  }\n\n  ids.filter((id) => ![SETTING.DISABLE_INACTIVE_USER_AFTER, SETTING.DELETE_INACTIVE_USER_AFTER].includes(id))\n    .forEach(assignSettings);\n\n  addValidation(SETTING.USER_RETENTION_CRON);\n});\n\nconst assignSettings = (key: string) => {\n  if (settings[key].id === SETTING.USER_LAST_LOGIN_DEFAULT && settings[key].value && typeof settings[key].value === 'string') {\n    const value = settings[key].value as string;\n\n    userRetentionSettings[key] = dayjs(value).valueOf().toString();\n\n    return;\n  }\n\n  userRetentionSettings[key] = settings[key].value;\n};\n\nconst fetchSetting = async(id: string) => {\n  return await store.dispatch('management/find', { type: MANAGEMENT.SETTING, id });\n};\n\nconst ids = Object.keys(userRetentionSettings);\nconst settingPromises = ids.map((id) => fetchSetting(id));\n\nonMounted(async() => {\n  settings = await Promise\n    .all(settingPromises)\n    .then((results) => results.reduce((acc, result) => {\n      return {\n        [result.id]: result,\n        ...acc,\n      };\n    }, { }));\n\n  ids.forEach(assignSettings);\n\n  authUserSessionTtlMinutes.value = await fetchSetting(SETTING.AUTH_USER_SESSION_TTL_MINUTES);\n\n  disableAfterPeriod.value = !!userRetentionSettings[SETTING.DISABLE_INACTIVE_USER_AFTER];\n  deleteAfterPeriod.value = !!userRetentionSettings[SETTING.DELETE_INACTIVE_USER_AFTER];\n  loading.value = false;\n});\n\nconst { t } = useI18n(store);\nconst error = ref<string | null>(null);\nconst save = async(btnCB: (arg: boolean) => void) => {\n  try {\n    error.value = null;\n    ids.forEach((key) => {\n      settings[key].value = userRetentionSettings[key];\n\n      if (key === SETTING.USER_LAST_LOGIN_DEFAULT && userRetentionSettings[key]) {\n        settings[key].value = dayjs(Number(userRetentionSettings[key])).format();\n      }\n    });\n\n    await Promise.all(ids.map((setting) => settings[setting].save()));\n\n    btnCB(true);\n    store.dispatch(\n      'growl/success',\n      {\n        title:   t('user.retention.growl.title'),\n        message: t('user.retention.growl.message'),\n      },\n      { root: true }\n    );\n    routeBack();\n  } catch (err) {\n    error.value = (err as Error).message;\n    btnCB(false);\n  }\n};\n\nconst router = useRouter();\nconst routeBack = () => {\n  router.back();\n};\n\nonBeforeRouteUpdate((_to: unknown, _from: unknown) => {\n  if (!isAdminUser(store.getters)) {\n    router.replace({ name: 'home' });\n  }\n});\n</script>\n\n<template>\n  <div class=\"user-retention\">\n    <div class=\"user-retention-content\">\n      <user-retention-header />\n      <div\n        v-if=\"!loading\"\n        class=\"form-user-retention\"\n      >\n        <banner\n          v-if=\"error\"\n          color=\"error\"\n        >\n          {{ error }}\n        </banner>\n        <div class=\"input-fieldset\">\n          <checkbox\n            v-model:value=\"disableAfterPeriod\"\n            data-testid=\"disableAfterPeriod\"\n            :label=\"t('user.retention.edit.form.disableAfter.checkbox')\"\n          />\n          <labeled-input\n            v-model:value=\"userRetentionSettings[SETTING.DISABLE_INACTIVE_USER_AFTER]\"\n            data-testid=\"disableAfterPeriodInput\"\n            :tooltip=\"t('user.retention.edit.form.disableAfter.input.tooltip')\"\n            class=\"input-field\"\n            :label=\"t('user.retention.edit.form.disableAfter.input.label')\"\n            :disabled=\"!disableAfterPeriod\"\n            :rules=\"[validateDisableInactiveUserAfterDuration, validateDurationAgainstAuthUserSession]\"\n            @update:validation=\"e => setValidation(SETTING.DISABLE_INACTIVE_USER_AFTER, e)\"\n          />\n        </div>\n        <div class=\"input-fieldset\">\n          <checkbox\n            v-model:value=\"deleteAfterPeriod\"\n            data-testid=\"deleteAfterPeriod\"\n            :label=\"t('user.retention.edit.form.deleteAfter.checkbox')\"\n          />\n          <labeled-input\n            v-model:value=\"userRetentionSettings[SETTING.DELETE_INACTIVE_USER_AFTER]\"\n            data-testid=\"deleteAfterPeriodInput\"\n            :tooltip=\"t('user.retention.edit.form.deleteAfter.input.tooltip')\"\n            class=\"input-field\"\n            :label=\"t('user.retention.edit.form.deleteAfter.input.label')\"\n            :sub-label=\"t('user.retention.edit.form.deleteAfter.input.subLabel')\"\n            :disabled=\"!deleteAfterPeriod\"\n            :rules=\"[validateDeleteInactiveUserAfterDuration, validateDurationAgainstAuthUserSession, validateDeleteInactiveUserAfter]\"\n            @update:validation=\"e => setValidation(SETTING.DELETE_INACTIVE_USER_AFTER, e)\"\n          />\n        </div>\n        <template\n          v-if=\"disableAfterPeriod || deleteAfterPeriod\"\n        >\n          <div class=\"input-fieldset pt-12\">\n            <labeled-input\n              v-model:value=\"userRetentionSettings[SETTING.USER_RETENTION_CRON]\"\n              data-testid=\"userRetentionCron\"\n              class=\"input-field\"\n              required\n              type=\"cron\"\n              :tooltip=\"t('user.retention.edit.form.cron.subLabel')\"\n              :rules=\"[validateUserRetentionCron]\"\n              :label=\"t('user.retention.edit.form.cron.label')\"\n              :require-dirty=\"false\"\n              @update:validation=\"e => setValidation(SETTING.USER_RETENTION_CRON, e)\"\n            />\n          </div>\n          <div class=\"input-fieldset condensed pt-12\">\n            <toggle-switch\n              v-model:value=\"userRetentionSettings[SETTING.USER_RETENTION_DRY_RUN]\"\n              data-testid=\"userRetentionDryRun\"\n              :onValue=\"'true'\"\n              :offValue=\"'false'\"\n              :on-label=\"t('user.retention.edit.form.dryRun.label')\"\n            />\n            <span class=\"input-detail\">{{ t('user.retention.edit.form.dryRun.subLabel') }}</span>\n          </div>\n          <div class=\"input-fieldset condensed\">\n            <labeled-input\n              v-model:value=\"userRetentionSettings[SETTING.USER_LAST_LOGIN_DEFAULT]\"\n              data-testid=\"userLastLoginDefault\"\n              class=\"input-field\"\n              :label=\"t('user.retention.edit.form.defaultLastLogin.label')\"\n              :sub-label=\"t('user.retention.edit.form.defaultLastLogin.subLabel')\"\n              :placeholder=\"t('user.retention.edit.form.defaultLastLogin.placeholder')\"\n            />\n          </div>\n        </template>\n      </div>\n    </div>\n    <Footer\n      class=\"footer-user-retention\"\n      mode=\"edit\"\n      :disable-save=\"!isFormValid\"\n      @save=\"save\"\n      @done=\"routeBack\"\n    />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .user-retention {\n    height: 100%;\n  }\n\n  .user-retention-content {\n    height: 100%;\n    overflow-y: scroll;\n  }\n\n  .form-user-retention {\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n    gap: 1.5rem;\n  }\n\n  .footer-user-retention {\n    border-top: var(--header-border-size) solid var(--header-border);\n    background-color: var(--header-bg);\n    margin-left: -20px;\n    margin-right: -20px;\n    margin-bottom: -20px;\n    margin-top: 20px;\n    padding: 10px 20px;\n    height: $footer-height;\n\n    :deep() .spacer-small {\n      padding: 0;\n    }\n  }\n\n  .input-fieldset {\n    display: flex;\n    flex-direction: column;\n    gap: 0.75rem;\n\n    &.condensed {\n      gap: 0.25rem;\n    }\n\n    &.pt-12 {\n      padding-top: 3rem;\n    }\n  }\n\n  .input-field {\n    max-width: 24rem\n  }\n\n  .input-detail {\n    color: var(--input-label);\n    padding-left: 61px;\n  }\n</style>\n","import script from \"./index.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./index.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./index.vue?vue&type=style&index=0&id=65cf4ee6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../../../vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-65cf4ee6\"]])\n\nexport default __exports__"],"names":["___CSS_LOADER_EXPORT___","i","push","module","id","t","s","exports","this","n","e","r","o","u","d","a","h","years","months","days","hours","minutes","seconds","milliseconds","weeks","c","g","f","$l","m","p","l","$","Math","ceil","floor","y","abs","v","negative","format","$d","$ms","parseFromMilliseconds","Object","keys","forEach","calMilliseconds","match","slice","map","Number","prototype","reduce","toISOString","round","toJSON","Y","YY","YYYY","M","MM","D","DD","H","HH","mm","ss","SSS","replace","String","as","get","add","subtract","locale","clone","humanize","fromNow","valueOf","asMilliseconds","asSeconds","asMinutes","asHours","asDays","asWeeks","asMonths","asYears","$utils","duration","isDuration","bind","content","__esModule","default","locals","__name","setup","__props","expose","__expose","__returned__","TabTitle","defineProperty","enumerable","value","__exports__","ExpectedValidationError","Error","constructor","message","super","isExpected","name","useUserRetentionValidation","disableAfterPeriod","deleteAfterPeriod","authUserSessionTtlMinutes","store","useI18n","validation","DISABLE_INACTIVE_USER_AFTER","DELETE_INACTIVE_USER_AFTER","USER_RETENTION_CRON","isFormValid","validations","values","includes","setValidation","formField","isValid","removeValidation","setting","_","rest","addValidation","parseDuration","durationPattern","parseInt","validateUserRetentionCron","cronSetting","isValidCron","validateDisableInactiveUserAfterDuration","error","validateDeleteInactiveUserAfterDuration","validateDeleteInactiveUserAfter","inputDuration","minDuration","validateDurationAgainstAuthUserSession","AUTH_USER_SESSION_TTL_MINUTES","userRetentionSettings","USER_RETENTION_DRY_RUN","USER_LAST_LOGIN_DEFAULT","loading","settings","newVal","newDisableAfterPeriod","newDeleteAfterPeriod","ids","key","filter","assignSettings","toString","fetchSetting","async","dispatch","type","SETTING","settingPromises","Promise","all","then","results","acc","result","save","btnCB","title","root","routeBack","err","router","back","_to","_from","isAdminUser","getters","UserRetentionHeader","Footer","Banner","Checkbox","LabeledInput","ToggleSwitch"],"ignoreList":[],"sourceRoot":""}