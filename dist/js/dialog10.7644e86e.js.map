{"version":3,"file":"js/dialog10.7644e86e.js","mappings":"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","sources":["webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/AssignToDialog.vue?203e","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/AssignToDialog.vue","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/AssignToDialog.vue?46be","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/AssignToDialog.vue?2928"],"sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../vue-loader/dist/stylePostLoader.js!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../vue-loader/dist/index.js??ruleSet[0].use[1]!./AssignToDialog.vue?vue&type=style&index=0&id=cc2fbf92&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"142c2e1a\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","<script>\nimport { mapGetters } from 'vuex';\nimport { FLEET, NORMAN } from '@shell/config/types';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport KeyValue from '@shell/components/form/KeyValue';\nimport AsyncButton from '@shell/components/AsyncButton';\nimport { Card } from '@components/Card';\nimport { Banner } from '@components/Banner';\nimport { exceptionToErrorsArray } from '@shell/utils/error';\nimport { set } from '@shell/utils/object';\n\nexport default {\n  emits: ['close'],\n\n  components: {\n    Card,\n    LabeledSelect,\n    KeyValue,\n    AsyncButton,\n    Banner\n  },\n\n  props: {\n    toAssign: {\n      type:    Array,\n      default: () => []\n    }\n  },\n\n  data() {\n    return {\n      errors:        [],\n      labels:        {},\n      moveTo:        this.workspace,\n      loaded:        false,\n      allWorkspaces: []\n    };\n  },\n\n  async fetch() {\n    await this.$store.dispatch('rancher/findAll', { type: NORMAN.CLUSTER });\n    this.allWorkspaces = await this.$store.dispatch('management/findAll', { type: FLEET.WORKSPACE });\n    this.moveTo = this.workspace;\n    this.loaded = true;\n  },\n\n  computed: {\n    ...mapGetters({ t: 'i18n/t' }),\n    ...mapGetters(['workspace']),\n\n    workspaceOptions() {\n      const out = this.allWorkspaces.map((x) => x.metadata?.name).filter((x) => !!x && x !== 'fleet-local');\n\n      return out;\n    },\n\n    resourceCount() {\n      return this.toAssign?.length || 0;\n    }\n  },\n\n  methods: {\n    close() {\n      this.errors = [];\n      this.labels = {};\n      this.moveTo = this.workspace;\n      this.$emit('close');\n    },\n\n    async apply(buttonDone) {\n      const promises = [];\n\n      this.errors = [];\n\n      for ( const fleetCluster of this.toAssign ) {\n        const c = await this.$store.dispatch(`rancher/clone`, { resource: fleetCluster.norman });\n\n        if ( !c ) {\n          continue;\n        }\n\n        c.fleetWorkspaceName = this.moveTo;\n\n        for ( const k of Object.keys(this.labels) ) {\n          if ( !c._labels ) {\n            set(c, '_labels', {});\n          }\n\n          set(c._labels, k, this.labels[k]);\n        }\n\n        promises.push(c.save());\n      }\n\n      try {\n        await Promise.all(promises);\n        buttonDone(true);\n        this.close();\n      } catch (e) {\n        this.errors = exceptionToErrorsArray(e);\n        buttonDone(false);\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <Card\n    :show-highlight-border=\"false\"\n  >\n    <template #title>\n      <h4\n        v-clean-html=\"t('assignTo.title', {count: resourceCount}, true)\"\n        class=\"text-default-text\"\n      />\n    </template>\n    <template #body>\n      <div class=\"pl-10 pr-10\">\n        <form>\n          <LabeledSelect\n            v-model:value=\"moveTo\"\n            data-testid=\"workspace_options\"\n            :label=\"t('assignTo.workspace')\"\n            :options=\"workspaceOptions\"\n            placement=\"bottom\"\n          />\n\n          <KeyValue\n            key=\"labels\"\n            v-model:value=\"labels\"\n            class=\"mt-20\"\n            :add-label=\"t('labels.addSetLabel')\"\n            :read-allowed=\"false\"\n          />\n\n          <Banner\n            v-for=\"(err, i) in errors\"\n            :key=\"i\"\n            color=\"error\"\n            :label=\"err\"\n          />\n        </form>\n      </div>\n    </template>\n\n    <template #actions>\n      <div class=\"actions-container\">\n        <button\n          class=\"btn role-secondary\"\n          @click=\"close\"\n        >\n          {{ t('generic.cancel') }}\n        </button>\n\n        <AsyncButton\n          class=\"apply-btn\"\n          mode=\"apply\"\n          @click=\"apply\"\n        />\n      </div>\n    </template>\n  </Card>\n</template>\n\n<style lang='scss'>\n  .actions-container {\n      display: flex;\n      justify-content: flex-end;\n      width: 100%;\n\n      .apply-btn {\n        margin-left: 20px;\n      }\n    }\n</style>\n","import { render } from \"./AssignToDialog.vue?vue&type=template&id=cc2fbf92\"\nimport script from \"./AssignToDialog.vue?vue&type=script&lang=js\"\nexport * from \"./AssignToDialog.vue?vue&type=script&lang=js\"\n\nimport \"./AssignToDialog.vue?vue&type=style&index=0&id=cc2fbf92&lang=scss\"\n\nimport exportComponent from \"../../../vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../vue-loader/dist/stylePostLoader.js!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../xterm/css/xterm.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.actions-container{display:flex;justify-content:flex-end;width:100%}.actions-container .apply-btn{margin-left:20px}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["content","__esModule","default","module","id","locals","exports","add","class","title","t","count","resourceCount","body","value","moveTo","label","options","workspaceOptions","placement","key","labels","errors","err","i","color","actions","close","mode","apply","emits","components","Card","LabeledSelect","KeyValue","AsyncButton","Banner","props","toAssign","type","Array","data","this","workspace","loaded","allWorkspaces","fetch","$store","dispatch","CLUSTER","WORKSPACE","computed","out","map","x","metadata","name","filter","length","methods","$emit","buttonDone","promises","fleetCluster","c","resource","norman","fleetWorkspaceName","k","Object","keys","_labels","set","push","save","Promise","all","e","__exports__","render","___CSS_LOADER_EXPORT___"],"ignoreList":[],"sourceRoot":""}