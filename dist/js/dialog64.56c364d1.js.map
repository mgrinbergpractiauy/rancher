{"version":3,"file":"js/dialog64.56c364d1.js","mappings":"uHAGA,IAAIA,EAAU,EAAQ,OACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,kBAAZF,IAAsBA,EAAU,CAAC,CAACG,EAAOC,GAAIJ,EAAS,MAC7DA,EAAQK,SAAQF,EAAOG,QAAUN,EAAQK,QAE5C,IAAIE,EAAM,WACGA,EAAI,WAAYP,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,G,mHCLxEQ,EAA0B,IAA4B,KAC1DA,EAAwBC,EAAE,KAE1BD,EAAwBE,KAAK,CAACP,EAAOC,GAAI,ifAAkf,KAE3hB,S,gGC8FOO,MAAM,yB,GACLA,MAAM,S,GAGLA,MAAM,sB,GACJA,MAAM,e,GAKNA,MAAM,kB,yFAVf,QA2BM,MA3BN,EA2BM,EA1BJ,QAEK,KAFL,GAEK,QADAC,EAAAA,EAAE,0BAA2B,CAAEC,KAAM,IAAI,EAAAC,QAAQC,WAAY,IAAP,G,yBAE3D,QAsBM,MAtBN,EAsBM,EArBJ,QAIM,MAJN,EAIM,EAHJ,QAEI,kBADCH,EAAAA,EAAE,6BAAD,K,yBAGR,QAeM,MAfN,EAeM,EAdJ,QAOS,UANNI,SAAU,EAAAC,KACXN,MAAM,qBACN,cAAY,iCACX,QAAK,eAAE,EAAAO,aAAY,M,QAEjBN,EAAAA,EAAE,mBAAD,K,yBAEN,QAKE,GAJAO,KAAK,YACJC,KAAM,EAAAH,KAAO,GAAK,cACnB,cAAY,oCACX,QAAK,eAAE,EAAAI,c,uEAvHlB,SACEC,MAAO,CAAC,SAERC,WAAY,CAAEC,YAAW,KAEzBC,MAAO,CAILX,OAAQ,CACNY,KAAUC,OACVzB,QAAU,OACV0B,UAAU,GAKZC,aAAc,CACZH,KAAUI,SACV5B,QAAU,OACV0B,UAAU,GAKZG,OAAQ,CACNL,KAAUI,SACV5B,QAAU,OACV0B,UAAU,GAEZI,UAAW,CACTN,KAASO,MACT/B,QAAS,IAAM,IAEjBgC,0BAA2B,CACzBR,KAASI,SACT5B,QAAS,SAIb,IAAAiC,GACE,MAAO,CAAElB,MAAM,EACjB,EAEAmB,SAAU,KAAK,QAAW,CAAEC,UAAW,oBAEvCC,QAAS,CACP,UAAAC,CAAWzB,GACT0B,KAAK1B,OAASA,EACd0B,KAAKvB,MAAO,CACd,EACA,WAAAC,CAAYuB,GACVD,KAAKT,OAAOU,GACZD,KAAKE,MAAM,QACb,EACA,eAAMrB,GACJmB,KAAKvB,MAAO,EAEZ,MAAMH,EAAS0B,KAAK1B,OAEpB0B,KAAKX,aAAaf,EAAOD,KAAM,aAG3BC,EAAO6B,UAAUC,mBAEb9B,EAAO6B,SAASE,SAIxB,MAAMC,QAAaN,KAAKO,OAAOC,SAAS,qBAAsB,CAAEtB,KAAM,KAAQuB,MAExEC,EAAYJ,EAAKK,KAAMC,GACpBA,EAAIC,YAAc,MAAuBD,EAAIvC,OAASC,EAAOD,MAGtE,GAAIqC,EAAW,CACb,UACQA,EAAUL,QAClB,CAAE,MAAOS,GACPd,KAAKO,OAAOC,SAAS,cAAe,CAClCO,MAASf,KAAK5B,EAAE,yBAChB4C,QAASF,EAAEE,QAAUF,EAAEE,QAAUF,EACjCG,QAAS,KACR,CAAEC,MAAM,GACb,OAEMlB,KAAKO,OAAOC,SAAS,qBAAsB,CAAEtB,KAAM,KAAQiC,WACnE,CAEAnB,KAAKtB,YAAYJ,EACnB,I,uBC1FJ,MAAM8C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,G","sources":["webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/UninstallExtensionDialog.vue?12ce","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/UninstallExtensionDialog.vue?6e9e","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/UninstallExtensionDialog.vue","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/UninstallExtensionDialog.vue?80ee"],"sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../vue-loader/dist/stylePostLoader.js!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../vue-loader/dist/index.js??ruleSet[0].use[1]!./UninstallExtensionDialog.vue?vue&type=style&index=0&id=57ab0b74&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"e093a4ee\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../vue-loader/dist/stylePostLoader.js!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../xterm/css/xterm.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.plugin-install-dialog[data-v-57ab0b74]{padding:10px}.plugin-install-dialog h4[data-v-57ab0b74]{font-weight:700}.plugin-install-dialog .dialog-panel[data-v-57ab0b74]{display:flex;flex-direction:column;min-height:100px}.plugin-install-dialog .dialog-panel .dialog-info[data-v-57ab0b74]{flex:1}.plugin-install-dialog .dialog-buttons[data-v-57ab0b74]{display:flex;justify-content:flex-end;margin-top:10px}.plugin-install-dialog .dialog-buttons[data-v-57ab0b74]>:not(:last-child){margin-right:10px}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","<script>\nimport { mapGetters } from 'vuex';\n\nimport AsyncButton from '@shell/components/AsyncButton';\nimport { CATALOG } from '@shell/config/types';\nimport { UI_PLUGIN_NAMESPACE } from '@shell/config/uiplugins';\n\nexport default {\n  emits: ['close'],\n\n  components: { AsyncButton },\n\n  props: {\n    /**\n     * Plugin object\n     */\n    plugin: {\n      type:     Object,\n      default:  () => {},\n      required: true\n    },\n    /**\n     * Callback to update install status on extensions main screen\n     */\n    updateStatus: {\n      type:     Function,\n      default:  () => {},\n      required: true\n    },\n    /**\n     * Callback when modal is closed\n     */\n    closed: {\n      type:     Function,\n      default:  () => {},\n      required: true\n    },\n    resources: {\n      type:    Array,\n      default: () => []\n    },\n    registerBackgroundClosing: {\n      type:    Function,\n      default: () => {}\n    }\n  },\n\n  data() {\n    return { busy: false };\n  },\n\n  computed: { ...mapGetters({ allCharts: 'catalog/charts' }) },\n\n  methods: {\n    showDialog(plugin) {\n      this.plugin = plugin;\n      this.busy = false;\n    },\n    closeDialog(result) {\n      this.closed(result);\n      this.$emit('close');\n    },\n    async uninstall() {\n      this.busy = true;\n\n      const plugin = this.plugin;\n\n      this.updateStatus(plugin.name, 'uninstall');\n\n      // Delete the CR if this is a developer plugin (there is no Helm App, so need to remove the CRD ourselves)\n      if (plugin.uiplugin?.isDeveloper) {\n        // Delete the custom resource\n        await plugin.uiplugin.remove();\n      }\n\n      // Find the app for this plugin\n      const apps = await this.$store.dispatch('management/findAll', { type: CATALOG.APP });\n\n      const pluginApp = apps.find((app) => {\n        return app.namespace === UI_PLUGIN_NAMESPACE && app.name === plugin.name;\n      });\n\n      if (pluginApp) {\n        try {\n          await pluginApp.remove();\n        } catch (e) {\n          this.$store.dispatch('growl/error', {\n            title:   this.t('plugins.error.generic'),\n            message: e.message ? e.message : e,\n            timeout: 10000\n          }, { root: true });\n        }\n\n        await this.$store.dispatch('management/findAll', { type: CATALOG.OPERATION });\n      }\n\n      this.closeDialog(plugin);\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"plugin-install-dialog\">\n    <h4 class=\"mt-10\">\n      {{ t('plugins.uninstall.title', { name: `\"${plugin?.label}\"` }, true) }}\n    </h4>\n    <div class=\"mt-10 dialog-panel\">\n      <div class=\"dialog-info\">\n        <p>\n          {{ t('plugins.uninstall.prompt') }}\n        </p>\n      </div>\n      <div class=\"dialog-buttons\">\n        <button\n          :disabled=\"busy\"\n          class=\"btn role-secondary\"\n          data-testid=\"uninstall-ext-modal-cancel-btn\"\n          @click=\"closeDialog(false)\"\n        >\n          {{ t('generic.cancel') }}\n        </button>\n        <AsyncButton\n          mode=\"uninstall\"\n          :icon=\"busy ? '' : 'icon-delete'\"\n          data-testid=\"uninstall-ext-modal-uninstall-btn\"\n          @click=\"uninstall()\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .plugin-install-dialog {\n    padding: 10px;\n\n    h4 {\n      font-weight: bold;\n    }\n\n    .dialog-panel {\n      display: flex;\n      flex-direction: column;\n      min-height: 100px;\n\n      .dialog-info {\n        flex: 1;\n      }\n    }\n\n    .dialog-buttons {\n      display: flex;\n      justify-content: flex-end;\n      margin-top: 10px;\n\n      > *:not(:last-child) {\n        margin-right: 10px;\n      }\n    }\n  }\n</style>\n","import { render } from \"./UninstallExtensionDialog.vue?vue&type=template&id=57ab0b74&scoped=true\"\nimport script from \"./UninstallExtensionDialog.vue?vue&type=script&lang=js\"\nexport * from \"./UninstallExtensionDialog.vue?vue&type=script&lang=js\"\n\nimport \"./UninstallExtensionDialog.vue?vue&type=style&index=0&id=57ab0b74&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-57ab0b74\"]])\n\nexport default __exports__"],"names":["content","__esModule","default","module","id","locals","exports","add","___CSS_LOADER_EXPORT___","i","push","class","t","name","plugin","label","disabled","busy","closeDialog","mode","icon","uninstall","emits","components","AsyncButton","props","type","Object","required","updateStatus","Function","closed","resources","Array","registerBackgroundClosing","data","computed","allCharts","methods","showDialog","this","result","$emit","uiplugin","isDeveloper","remove","apps","$store","dispatch","APP","pluginApp","find","app","namespace","e","title","message","timeout","root","OPERATION","__exports__","render"],"ignoreList":[],"sourceRoot":""}