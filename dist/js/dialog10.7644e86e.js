(self["webpackChunkcluster_log_extension"]=self["webpackChunkcluster_log_extension"]||[]).push([[9400],{5917:(e,s,t)=>{var l=t(73591);l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);var a=t(99548).A;a("142c2e1a",l,!0,{sourceMap:!1,shadowMode:!1})},64159:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var l=t(20641),a=t(90033);const o={class:"text-default-text"},n={class:"pl-10 pr-10"},r={class:"actions-container"};function c(e,s,t,c,i,p){const d=(0,l.g2)("LabeledSelect"),u=(0,l.g2)("KeyValue"),h=(0,l.g2)("Banner"),b=(0,l.g2)("AsyncButton"),k=(0,l.g2)("Card"),m=(0,l.gN)("clean-html");return(0,l.uX)(),(0,l.Wv)(k,{"show-highlight-border":!1},{title:(0,l.k6)(()=>[(0,l.bo)((0,l.Lk)("h4",o,null,512),[[m,e.t("assignTo.title",{count:p.resourceCount},!0)]])]),body:(0,l.k6)(()=>[(0,l.Lk)("div",n,[(0,l.Lk)("form",null,[(0,l.bF)(d,{value:i.moveTo,"onUpdate:value":s[0]||(s[0]=e=>i.moveTo=e),"data-testid":"workspace_options",label:e.t("assignTo.workspace"),options:p.workspaceOptions,placement:"bottom"},null,8,["value","label","options"]),s[3]||(s[3]=(0,l.eW)()),(0,l.bF)(u,{key:"labels",value:i.labels,"onUpdate:value":s[1]||(s[1]=e=>i.labels=e),class:"mt-20","add-label":e.t("labels.addSetLabel"),"read-allowed":!1},null,8,["value","add-label"]),s[4]||(s[4]=(0,l.eW)()),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.errors,(e,s)=>((0,l.uX)(),(0,l.Wv)(h,{key:s,color:"error",label:e},null,8,["label"]))),128))])])]),actions:(0,l.k6)(()=>[(0,l.Lk)("div",r,[(0,l.Lk)("button",{class:"btn role-secondary",onClick:s[2]||(s[2]=(...e)=>p.close&&p.close(...e))},(0,a.v_)(e.t("generic.cancel")),1),s[5]||(s[5]=(0,l.eW)()),(0,l.bF)(b,{class:"apply-btn",mode:"apply",onClick:p.apply},null,8,["onClick"])])]),_:1,__:[6,7]})}var i=t(66278),p=t(55823),d=t(85158),u=t(10225),h=t(72268),b=t(40949),k=t(14492),m=t(37447),f=t(6826);const v={emits:["close"],components:{Card:b.Z,LabeledSelect:d.A,KeyValue:u.A,AsyncButton:h.A,Banner:k.l},props:{toAssign:{type:Array,default:()=>[]}},data(){return{errors:[],labels:{},moveTo:this.workspace,loaded:!1,allWorkspaces:[]}},async fetch(){await this.$store.dispatch("rancher/findAll",{type:p.k$.CLUSTER}),this.allWorkspaces=await this.$store.dispatch("management/findAll",{type:p.Hs.WORKSPACE}),this.moveTo=this.workspace,this.loaded=!0},computed:{...(0,i.L8)({t:"i18n/t"}),...(0,i.L8)(["workspace"]),workspaceOptions(){const e=this.allWorkspaces.map(e=>e.metadata?.name).filter(e=>!!e&&"fleet-local"!==e);return e},resourceCount(){return this.toAssign?.length||0}},methods:{close(){this.errors=[],this.labels={},this.moveTo=this.workspace,this.$emit("close")},async apply(e){const s=[];this.errors=[];for(const l of this.toAssign){const e=await this.$store.dispatch("rancher/clone",{resource:l.norman});if(e){e.fleetWorkspaceName=this.moveTo;for(const s of Object.keys(this.labels))e._labels||(0,f.set)(e,"_labels",{}),(0,f.set)(e._labels,s,this.labels[s]);s.push(e.save())}}try{await Promise.all(s),e(!0),this.close()}catch(t){this.errors=(0,m.rz)(t),e(!1)}}}};t(5917);var y=t(66262);const g=(0,y.A)(v,[["render",c]]),w=g},73591:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var l=t(31601),a=t.n(l),o=t(76314),n=t.n(o),r=t(5111),c=n()(a());c.i(r.A),c.push([e.id,".actions-container{display:flex;justify-content:flex-end;width:100%}.actions-container .apply-btn{margin-left:20px}",""]);const i=c}}]);
//# sourceMappingURL=dialog10.7644e86e.js.map