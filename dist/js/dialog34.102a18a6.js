(self["webpackChunkcluster_log_extension"]=self["webpackChunkcluster_log_extension"]||[]).push([[1898],{6506:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>g});var a=o(20641),s=o(90033);const n={class:"text-default-text"},r={class:"mb-20"},c={class:"body"};function l(e,t,o,l,i,p){const d=(0,a.g2)("Banner"),u=(0,a.g2)("AsyncButton"),f=(0,a.g2)("Card"),m=(0,a.gN)("clean-html");return(0,a.uX)(),(0,a.Wv)(f,{class:"prompt-force-update","show-highlight-border":!1},{title:(0,a.k6)(()=>[(0,a.bo)((0,a.Lk)("h4",n,null,512),[[m,e.t("fleet.gitRepo.actions.forceUpdate.promptTitle")]])]),body:(0,a.k6)(()=>[(0,a.Lk)("div",r,[(0,a.eW)((0,s.v_)(e.t("fleet.gitRepo.actions.forceUpdate.promptNames"))+" ",1),(0,a.bo)((0,a.Lk)("span",c,null,512),[[m,p.resourceNames(p.names,null,e.t)]])]),t[1]||(t[1]=(0,a.eW)()),(0,a.bF)(d,{color:"info","label-key":"fleet.gitRepo.actions.forceUpdate.promptWarning"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.Lk)("span",null,null,512),[[m,e.t("fleet.gitRepo.actions.forceUpdate.promptWarning",{count:p.names.length},!0)]])]),_:1}),t[2]||(t[2]=(0,a.eW)()),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.errors,(e,t)=>((0,a.uX)(),(0,a.Wv)(d,{key:t,color:"error",label:e},null,8,["label"]))),128))]),actions:(0,a.k6)(()=>[(0,a.Lk)("button",{class:"btn role-secondary",onClick:t[0]||(t[0]=(...e)=>p.close&&p.close(...e))},(0,s.v_)(e.t("generic.cancel")),1),t[3]||(t[3]=(0,a.eW)()),t[4]||(t[4]=(0,a.Lk)("div",{class:"spacer"},null,-1)),t[5]||(t[5]=(0,a.eW)()),(0,a.bF)(u,{mode:"update",class:"btn bg-info ml-10","data-testid":"deactivate-driver-confirm",onClick:p.apply},null,8,["onClick"])]),_:1,__:[6,7]})}var i=o(66278),p=o(72140),d=o(37447),u=o(14492),f=o(40949),m=o(72268);const h={name:"GitRepoForceUpdateDialog",emits:["close"],components:{AsyncButton:m.A,Banner:u.l,Card:f.Z},props:{repositories:{type:Array,required:!0}},data(){return{errors:[]}},computed:{...(0,i.aH)("action-menu",["toRemove"]),...(0,i.L8)({t:"i18n/t"}),names(){return this.repositories.map(e=>e.nameDisplay)}},methods:{resourceNames:p.Nr,close(e){e&&"function"===typeof e&&e(!0),this.$emit("close")},async apply(e){try{await Promise.all(this.repositories.map(e=>this.updateGitRepo(e))),this.close()}catch(t){this.errors=(0,d.rz)(t),e(!1)}},updateGitRepo(e){const t=e.spec.forceSyncGeneration||1;return e.spec.forceSyncGeneration=t+1,e.save()}}};o(18308);var y=o(66262);const b=(0,y.A)(h,[["render",l],["__scopeId","data-v-3eed93ec"]]),g=b},18308:(e,t,o)=>{var a=o(92050);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var s=o(99548).A;s("ffc16e80",a,!0,{sourceMap:!1,shadowMode:!1})},92050:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>i});var a=o(31601),s=o.n(a),n=o(76314),r=o.n(n),c=o(5111),l=r()(s());l.i(c.A),l.push([e.id,".card-container[data-v-3eed93ec]{box-shadow:none}[data-v-3eed93ec]  .card-actions{display:flex;justify-content:end}",""]);const i=l}}]);
//# sourceMappingURL=dialog34.102a18a6.js.map