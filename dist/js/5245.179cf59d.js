(self["webpackChunkcluster_log_extension"]=self["webpackChunkcluster_log_extension"]||[]).push([[5245],{485:(t,e,a)=>{var r=a(83379);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var s=a(99548).A;s("2df4216f",r,!0,{sourceMap:!1,shadowMode:!1})},6411:(t,e,a)=>{"use strict";a.d(e,{A:()=>d});var r=a(20641),s=a(38089);const o=(0,r.pM)({__name:"AppChartCardFooter",props:{items:{type:Array,required:!0},clickable:{type:Boolean,required:!1}},emits:["click:item"],setup(t,{expose:e,emit:a}){e();const r=a;function o(t,e){r("click:item",t,e)}const i={emit:r,onClickItem:o,get RcItemCardAction(){return s.t}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}});a(485);var i=a(66262);const n=(0,i.A)(o,[["__scopeId","data-v-1af85dd8"]]),d=n},9796:(t,e,a)=>{var r=a(57762);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var s=a(99548).A;s("762095a4",r,!0,{sourceMap:!1,shadowMode:!1})},11678:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>l});var r=a(31601),s=a.n(r),o=a(76314),i=a.n(o),n=a(5111),d=i()(s());d.i(n.A),d.push([t.id,".app-chart-card-sub-header[data-v-633d8909]{display:flex;gap:var(--gap-md);color:var(--link-text-secondary);margin-bottom:8px}.app-chart-card-sub-header-item[data-v-633d8909]{display:flex;align-items:center}.app-chart-card-sub-header-item-icon[data-v-633d8909]{width:20px;height:20px;display:flex;font-size:19px;align-items:center;justify-content:center;margin-right:8px}",""]);const l=d},34344:(t,e,a)=>{"use strict";a.d(e,{A:()=>n});var r=a(20641);const s=(0,r.pM)({__name:"AppChartCardSubHeader",props:{items:{type:Array,required:!0}},setup(t,{expose:e}){e();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}});a(66408);var o=a(66262);const i=(0,o.A)(s,[["__scopeId","data-v-633d8909"]]),n=i},55245:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>I});var r=a(20641),s=a(90033);const o={key:1},i={class:"mmb-6"},n={class:"tools-app-chart-cards","data-testid":"tools-app-chart-cards"},d={key:2};function l(t,e,a,l,c,p){const h=(0,r.g2)("Loading"),u=(0,r.g2)("TabTitle"),g=(0,r.g2)("AppChartCardSubHeader"),m=(0,r.g2)("AppChartCardFooter"),v=(0,r.g2)("rc-item-card"),f=(0,r.g2)("IconMessage");return t.$fetchState.pending?((0,r.uX)(),(0,r.Wv)(h,{key:0})):p.appChartCards.length?((0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("h1",i,[(0,r.bF)(u,null,{default:(0,r.k6)(()=>[(0,r.eW)((0,s.v_)(t.t("catalog.tools.header")),1)]),_:1})]),e[1]||(e[1]=(0,r.eW)()),(0,r.Lk)("div",n,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(p.appChartCards,t=>((0,r.uX)(),(0,r.Wv)(v,{id:t.id,key:t.id,header:t.header,image:t.image,content:t.content,actions:p.getCardActions(t),class:(0,s.C4)({"single-card":1===p.appChartCards.length}),onUpgrade:()=>p.upgrade(t.installedApp,t.rawChart),onDowngrade:()=>p.downgrade(t.installedApp,t.rawChart),onEdit:()=>p.edit(t.installedApp),onRemove:e=>p.remove(t.installedApp,e.event),onInstall:()=>p.install(t.rawChart)},{"item-card-sub-header":(0,r.k6)(()=>[(0,r.bF)(g,{items:t.subHeaderItems},null,8,["items"])]),"item-card-footer":(0,r.k6)(()=>[(0,r.bF)(m,{items:t.footerItems},null,8,["items"])]),_:2,__:[0]},1032,["id","header","image","content","actions","class","onUpgrade","onDowngrade","onEdit","onRemove","onInstall"]))),128))])])):((0,r.uX)(),(0,r.CE)("div",d,[(0,r.bF)(f,{icon:"icon-warning","message-key":"catalog.tools.noTools"})]))}var c=a(66278),p=a(57090),h=a(46405),u=a(67130),g=a(55823),m=a(96676),v=a(62606),f=a(6424),A=a(95753),C=a(6826),w=a(38089),b=a(34344),x=a(6411);const y={components:{Loading:p.A,IconMessage:f.A,TabTitle:A.A,RcItemCard:w.B,AppChartCardSubHeader:b.A,AppChartCardFooter:x.A},async fetch(){await this.$store.dispatch("catalog/load",{force:!0,reset:!0});const t=this.$route.query;this.showDeprecated="true"===t[h.GQ]||t[h.GQ]===h.Qp,this.showHidden=t[h.RG]===h.Qp,this.allInstalled=await this.$store.dispatch("cluster/findAll",{type:g.W8.APP})},data(){return{allInstalled:null,v1SystemCatalog:null,systemProject:null}},computed:{...(0,c.L8)(["currentCluster"]),...(0,c.L8)({allCharts:"catalog/charts",loadingErrors:"catalog/errors"}),...(0,c.L8)({t:"i18n/t"}),v1Apps(){return this.$store.getters["rancher/all"](g.k$.APP)},namespaces(){return this.$store.getters["activeNamespaceCache"]},rancherCatalog(){return this.$store.getters["catalog/repos"].find(t=>t.isRancher)},installedApps(){return this.allInstalled},installedAppForChart(){const t={};for(const e of this.installedApps||[]){const a=e.matchingCharts()[0];a&&(t[a.id]=e)}return t},appChartCards(){const t=this.currentCluster.status.provider||"other",e=this.allCharts||[];let a=(0,u.filterAndArrangeCharts)(e,{clusterProvider:t,showDeprecated:this.showDeprecated,showHidden:this.showHidden,showRepos:[this.rancherCatalog?._key],showTypes:[m.W8._CLUSTER_TOOL]});return a=a.filter(t=>"Experimental"!==t.sideLabel),a.map(t=>{const e=this.installedAppForChart[t.id],a={id:t.id,header:{title:{text:t.chartNameDisplay},statuses:t.cardContent.statuses},subHeaderItems:t.cardContent.subHeaderItems.slice(0,1),footerItems:t.deploysOnWindows?[{icon:"icon-tag-alt",iconTooltip:{key:"generic.tags"},labels:[this.t("catalog.charts.deploysOnWindows")]}]:[],image:{src:t.versions[0].icon,alt:{text:this.t("catalog.charts.iconAlt",{app:(0,C.get)(t,"chartNameDisplay")})}},content:{text:t.chartDescription},rawChart:t,installedApp:e};return a})}},watch:{namespaces(){this.systemProject&&this.$store.dispatch("rancher/findAll",{type:g.k$.APP,opt:{url:`/v3/project/${this.systemProject}/apps`,force:!0}})}},mounted(){window.c=this},methods:{getCardActions(t){const{installedApp:e,rawChart:a}=t;if(e){const t=[],r=e.upgradeAvailable===u.APP_UPGRADE_STATUS.SINGLE_UPGRADE;r&&t.push({label:this.t("catalog.tools.action.upgrade"),icon:"icon-upgrade-alt",action:"upgrade"}),t.push({label:this.t("catalog.tools.action.edit"),icon:"icon-edit",action:"edit"});const s=e.spec.chart.metadata.version,o=a.versions,i=o.findIndex(t=>t.version===s);return-1!==i&&i<o.length-1&&t.push({label:this.t("catalog.tools.action.downgrade"),icon:"icon-downgrade-alt",action:"downgrade"}),t.push({divider:!0}),t.push({label:this.t("catalog.tools.action.remove"),icon:"icon-delete",action:"remove"}),t}return[{label:this.t("catalog.tools.action.install"),action:"install",icon:"icon-plus",enabled:!a.blocked}]},upgrade(t,e){const a=e.versions[0].version;this.edit(t,a)},downgrade(t,e){const a=t.spec.chart.metadata.version,r=e.versions,s=r.findIndex(t=>t.version===a);if(-1!==s&&s<r.length-1){const e=r[s+1].version;this.edit(t,e)}},edit(t,e){t.goToUpgrade(e,!0)},remove(t,e){const a=(0,v.nN)(e);a?t.remove():t.promptRemove()},install(t){t.goToInstall(h.Rm)}}};a(9796);var _=a(66262);const k=(0,_.A)(y,[["render",l],["__scopeId","data-v-2aa402b7"]]),I=k},57762:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>l});var r=a(31601),s=a.n(r),o=a(76314),i=a.n(o),n=a(5111),d=i()(s());d.i(n.A),d.push([t.id,".tools-app-chart-cards[data-v-2aa402b7]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));grid-gap:var(--gap-md);width:100%;height:-moz-max-content;height:max-content;overflow:hidden}.tools-app-chart-cards .single-card[data-v-2aa402b7]{max-width:500px}",""]);const l=d},66408:(t,e,a)=>{var r=a(11678);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals);var s=a(99548).A;s("2f172842",r,!0,{sourceMap:!1,shadowMode:!1})},83379:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>l});var r=a(31601),s=a.n(r),o=a(76314),i=a.n(o),n=a(5111),d=i()(s());d.i(n.A),d.push([t.id,".app-chart-card-footer[data-v-1af85dd8]{display:flex;flex-wrap:wrap}.app-chart-card-footer-item[data-v-1af85dd8]{display:flex;align-items:center;color:var(--link-text-secondary);margin-top:8px;margin-right:8px}.app-chart-card-footer-item-text[data-v-1af85dd8]{text-transform:capitalize;margin-right:8px;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;word-break:break-all}.app-chart-card-footer-item-icon[data-v-1af85dd8]{width:20px;height:20px;display:flex;font-size:19px;align-items:center;justify-content:center;margin-right:8px}",""]);const l=d}}]);
//# sourceMappingURL=5245.179cf59d.js.map