(self["webpackChunkcluster_log_extension"]=self["webpackChunkcluster_log_extension"]||[]).push([[7248],{148:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var n=t(31601),s=t.n(n),i=t(76314),l=t.n(i),r=t(5111),c=l()(s());c.i(r.A),c.push([e.id,"hr[data-v-0c37eab8]{margin:20px 0}.account[data-v-0c37eab8]{justify-content:space-between}.account[data-v-0c37eab8],.keys-header[data-v-0c37eab8]{display:flex}.keys-header div[data-v-0c37eab8]{flex:1}.keys[data-v-0c37eab8]{display:flex;flex-direction:column}.keys .add[data-v-0c37eab8]{align-self:flex-end}.api-url[data-v-0c37eab8]{display:flex}.api-url>span[data-v-0c37eab8]{margin-right:6px}",""]);const o=c},6756:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});const n={data(){return{backLink:null}},beforeRouteEnter(e,a,t){t(e=>{(Object.keys(a.params).length||"home"===a.name)&&(e.backLink=a)})}}},16229:(e,a,t)=>{var n=t(77063);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var s=t(99548).A;s("02ef7e76",n,!0,{sourceMap:!1,shadowMode:!1})},77063:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var n=t(31601),s=t.n(n),i=t(76314),l=t.n(i),r=t(5111),c=l()(s());c.i(r.A),c.push([e.id,".back-link[data-v-0df7548a]{align-items:center;display:flex;font-size:16px;margin:10px 0 20px 0;outline:0;width:-moz-fit-content;width:fit-content}.back-link[data-v-0df7548a]:focus-visible{outline:2px solid var(--primary-keyboard-focus)}",""]);const o=c},86483:(e,a,t)=>{"use strict";t.d(a,{A:()=>o});var n=t(20641),s=t(90033);function i(e,a,t,i,l,r){const c=(0,n.g2)("router-link");return t.link&&t.link.name?((0,n.uX)(),(0,n.Wv)(c,{key:0,to:t.link,class:"back-link",role:"link","aria-label":e.t("generic.back")},{default:(0,n.k6)(()=>[a[0]||(a[0]=(0,n.Lk)("i",{class:"icon icon-chevron-left"},null,-1)),(0,n.eW)(" "+(0,s.v_)(e.t("generic.back")),1)]),_:1,__:[0]},8,["to","aria-label"])):((0,n.uX)(),(0,n.Wv)(c,{key:1,to:"/",class:"back-link","aria-label":e.t("nav.home")},{default:(0,n.k6)(()=>[a[1]||(a[1]=(0,n.Lk)("i",{class:"icon icon-chevron-left"},null,-1)),(0,n.eW)(" "+(0,s.v_)(e.t("nav.home")),1)]),_:1,__:[1]},8,["aria-label"]))}const l={props:{link:{type:Object,default:null}}};t(16229);var r=t(66262);const c=(0,r.A)(l,[["render",i],["__scopeId","data-v-0df7548a"]]),o=c},86494:(e,a,t)=>{var n=t(148);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var s=t(99548).A;s("393fd5cf",n,!0,{sourceMap:!1,shadowMode:!1})},97248:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>W});var n=t(20641),s=t(90033);const i={key:1},l={class:"account"},r=["aria-label"],c={class:"keys-header"},o={class:"api-url"},d=["aria-label"],u={key:0,class:"keys"},p={key:1};function h(e,a,t,h,y,k){const b=(0,n.g2)("Loading"),g=(0,n.g2)("BackLink"),v=(0,n.g2)("TabTitle"),f=(0,n.g2)("Principal"),m=(0,n.g2)("CopyToClipboardText"),w=(0,n.g2)("ResourceTable"),_=(0,n.g2)("Banner"),A=(0,n.gN)("t");return e.$fetchState.pending?((0,n.uX)(),(0,n.Wv)(b,{key:0})):((0,n.uX)(),(0,n.CE)("div",i,[(0,n.bF)(g,{link:e.backLink},null,8,["link"]),a[6]||(a[6]=(0,n.eW)()),(0,n.Lk)("h1",null,[(0,n.bF)(v,{breadcrumb:"vendor-only"},{default:(0,n.k6)(()=>[(0,n.eW)((0,s.v_)(e.t("accountAndKeys.title")),1)]),_:1})]),a[7]||(a[7]=(0,n.eW)()),(0,n.bo)((0,n.Lk)("h2",null,null,512),[[A,"accountAndKeys.account.title"]]),a[8]||(a[8]=(0,n.eW)()),(0,n.Lk)("div",l,[(0,n.bF)(f,{value:k.principal.id,"use-muted":!1,"show-labels":!0},null,8,["value"]),a[2]||(a[2]=(0,n.eW)()),(0,n.Lk)("div",null,[y.canChangePassword?((0,n.uX)(),(0,n.CE)("button",{key:0,role:"button","aria-label":e.t("accountAndKeys.account.change"),type:"button",class:"btn role-primary","data-testid":"account_change_password",onClick:a[0]||(a[0]=(...e)=>k.showChangePasswordDialog&&k.showChangePasswordDialog(...e))},(0,s.v_)(e.t("accountAndKeys.account.change")),9,r)):(0,n.Q3)("",!0)])]),a[9]||(a[9]=(0,n.eW)()),a[10]||(a[10]=(0,n.Lk)("hr",{role:"none"},null,-1)),a[11]||(a[11]=(0,n.eW)()),(0,n.Lk)("div",c,[(0,n.Lk)("div",null,[(0,n.bo)((0,n.Lk)("h2",null,null,512),[[A,"accountAndKeys.apiKeys.title"]]),a[4]||(a[4]=(0,n.eW)()),(0,n.Lk)("div",o,[(0,n.Lk)("span",null,(0,s.v_)(e.t("accountAndKeys.apiKeys.apiEndpoint")),1),a[3]||(a[3]=(0,n.eW)()),(0,n.bF)(m,{"aria-label":e.t("accountAndKeys.apiKeys.copyApiEnpoint"),text:k.apiUrl},null,8,["aria-label","text"])])]),a[5]||(a[5]=(0,n.eW)()),k.apiKeySchema?((0,n.uX)(),(0,n.CE)("button",{key:0,role:"button","aria-label":e.t("accountAndKeys.apiKeys.add.label"),class:"btn role-primary add mb-20","data-testid":"account_create_api_keys",onClick:a[1]||(a[1]=(...e)=>k.addKey&&k.addKey(...e))},(0,s.v_)(e.t("accountAndKeys.apiKeys.add.label")),9,d)):(0,n.Q3)("",!0)]),a[12]||(a[12]=(0,n.eW)()),k.apiKeySchema?((0,n.uX)(),(0,n.CE)("div",u,[(0,n.bF)(w,{schema:k.apiKeySchema,rows:k.apiKeys,headers:k.apiKeyheaders,"key-field":"id","data-testid":"api_keys_list",search:!0,"row-actions":!0,"table-actions":!0},null,8,["schema","rows","headers"])])):((0,n.uX)(),(0,n.CE)("div",p,[(0,n.bF)(_,{color:"warning",label:e.t("accountAndKeys.apiKeys.notAllowed")},null,8,["label"])]))]))}var y=t(86483),k=t(55823),b=t(95822),g=t(57090),v=t(27933),f=t(6756),m=t(66278),w=t(14492),_=t(56935),A=t(86090),K=t(95753),C=t(96763);const x="/v3",L={components:{CopyToClipboardText:A.A,BackLink:y.A,Banner:w.l,Loading:g.A,ResourceTable:_.A,Principal:v.A,TabTitle:K.A},mixins:[f.A],async fetch(){this.canChangePassword=await this.calcCanChangePassword(),this.apiKeySchema&&(this.rows=await this.$store.dispatch("rancher/findAll",{type:k.k$.TOKEN}));const e=await this.$store.dispatch("management/findAll",{type:k.Mc.SETTING}),a=e.find(e=>e.id===b.HG.API_HOST),t=e.find(e=>e.id===b.HG.SERVER_URL);this.apiHostSetting=a?.value,this.serverUrlSetting=t?.value},data(){return{apiHostSetting:null,serverUrlSetting:null,rows:null,canChangePassword:!1}},computed:{...(0,m.L8)({t:"i18n/t"}),apiKeyheaders(){return this.apiKeySchema?this.$store.getters["type-map/headersFor"](this.apiKeySchema):[]},apiUrlBase(){let e=this.apiHostSetting;e&&0!==e.indexOf("http")&&(e=`http://${e}`);let a=e||this.serverUrlSetting;return 0!==a.indexOf("http")&&(a=`${window.location.origin}/${a.replace(/^\/+/,"")}`),a=`${a.replace(/\/+$/,"")}/`,a},apiUrl(){const e=this.apiUrlBase,a=x.replace(/^\/+/,"");return`${e}${a}`},apiKeySchema(){try{return this.$store.getters["rancher/schemaFor"](k.k$.TOKEN)}catch(e){}return null},principal(){const e=this.$store.getters["auth/principalId"],a=this.$store.getters["rancher/byId"](k.k$.PRINCIPAL,e);return a||C.error("Failed to find principal with id: ",e),a||{}},apiKeys(){const e=e=>{const a=e.labels,t=e.expired,n=e.current;return(!t||!a||!a["ui-session"])&&!n};return this.rows?this.rows.filter(e):[]}},methods:{addKey(){this.$router.push({name:"account-create-key"})},async calcCanChangePassword(){if(!this.$store.getters["auth/enabled"])return!1;if("local"===this.principal.provider)return!!this.principal.loginName;const e=await this.$store.dispatch("rancher/findAll",{type:k.k$.USER,opt:{url:"/v3/users",filter:{me:!0}}});return!(!e||1!==e.length)&&!!e[0].username},showChangePasswordDialog(){this.$store.dispatch("management/promptModal",{component:"ChangePasswordDialog",testId:"change-password__modal",customClass:"change-password-modal",modalWidth:"500",height:"465"})}}};t(86494);var $=t(66262);const S=(0,$.A)(L,[["render",h],["__scopeId","data-v-0c37eab8"]]),W=S}}]);
//# sourceMappingURL=7248.83a6e8b0.js.map