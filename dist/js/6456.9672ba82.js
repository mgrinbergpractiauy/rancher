"use strict";(self["webpackChunkcluster_log_extension"]=self["webpackChunkcluster_log_extension"]||[]).push([[6456],{8243:(t,e,s)=>{s.d(e,{A:()=>m});var a=s(66278),n=s(55823),i=s(95822),o=s(86226),r=s(10874),l=s(83953),d=s(47170),h=s(4365),c=s(34663);const m={async fetch(){try{const t=await(0,d.kR)({globalSettings:(0,h.gT)(this.$store),apps:c.A.fetchCspAdaptorApp(this.$store)});(0,l.p)()||(0,l.T)(this.$store),this.apps=t.apps}catch(t){}this.haveAppsAndSettings=!!this.apps&&!!this.globalSettings},data(){return{apps:null,haveAppsAndSettings:null,canPaginate:!1}},computed:{...(0,a.L8)({loggedIn:"auth/loggedIn"}),globalSettings(){return this.$store.getters["management/all"](n.Mc.SETTING)},brand(){const t=this.globalSettings?.find(t=>t.id===i.HG.BRAND);return t?.value},color(){const t=this.globalSettings?.find(t=>t.id===i.HG.PRIMARY_COLOR);return t?.value},linkColor(){const t=this.globalSettings?.find(t=>t.id===i.HG.LINK_COLOR);return t?.value},theme(){const t=this.globalSettings?.find(t=>t.id===i.HG.THEME);return t?.value?t?.value:this.$store.getters["prefs/theme"]},cspAdapter(){return this.canCalcCspAdapter?c.A.hasCspAdapter({$store:this.$store,apps:this.apps}):""},canCalcCspAdapter(){return this.loggedIn&&this.haveAppsAndSettings}},watch:{color:{handler(t){t?this.setCustomColor(t):this.removeCustomColor()},immediate:!0},linkColor:{handler(t){t?this.setCustomColor(t,"link"):this.removeCustomColor("link")},immediate:!0},theme:{handler(){this.color&&this.setCustomColor(this.color),this.linkColor&&this.setCustomColor(this.linkColor,"link"),this.setBodyClass()},immediate:!0},cspAdapter:{handler(t){if(this.canCalcCspAdapter&&t&&!this.brand){const t=this.globalSettings?.find(t=>t.id===i.HG.BRAND);if(t)t.value="csp",t.save();else{const t=this.$store.getters["management/schemaFor"](n.Mc.SETTING),e=t?.linkFor("collection");e&&this.$store.dispatch("management/create",{type:n.Mc.SETTING,metadata:{name:i.HG.BRAND},value:"csp",default:""}).then(t=>t.save())}}},immediate:!0},brand:{handler(){this.setBodyClass()},immediate:!0}},mounted(){this.setBodyClass(),(0,r.D6)()},methods:{setCustomColor(t,e="primary"){const s=(0,o.Y8)(t,this.theme,e);for(const a in s)document.body.style.setProperty(a,s[a])},removeCustomColor(t="primary"){const e=(0,o.Y8)("rgb(0,0,0)",this.theme,t);for(const s in e)document.body.style.removeProperty(s)},setBodyClass(){const t=document.getElementsByTagName("body")[0],e="overflow-hidden dashboard-body";let a=`theme-${this.theme} ${e}`;if(this.brand)try{const t=s(83029)(`./${this.brand}/metadata.json`);"true"===t?.hasStylesheet?a=`${e} ${this.brand} theme-${this.theme}`:(a=`theme-${this.theme} overflow-hidden dashboard-body`,this.$store.dispatch("prefs/setBrandStyle","dark"===this.theme))}catch{}t.className=a}}}},16456:(t,e,s)=>{s.r(e),s.d(e,{default:()=>c});var a=s(20641);const n=["aria-label"];function i(t,e,s,i,o,r){const l=(0,a.g2)("router-view"),d=(0,a.g2)("Inactivity");return(0,a.uX)(),(0,a.CE)("main",{class:"main-layout","aria-label":t.t("layouts.blank")},[((0,a.uX)(),(0,a.Wv)(l,{key:t.$route.path})),e[0]||(e[0]=(0,a.eW)()),(0,a.bF)(d)],8,n)}var o=s(8243),r=s(1950);const l={components:{Inactivity:r.A},mixins:[o.A]};var d=s(66262);const h=(0,d.A)(l,[["render",i]]),c=h},34663:(t,e,s)=>{s.d(e,{A:()=>r});var a=s(55823),n=s(37001);const i=["rancher-csp-adapter","rancher-csp-billing-adapter"];class o{static canPagination(t){return t.getters["management/paginationEnabled"]({id:a.W8.APP,context:"branding"})}static fetchCspAdaptorApp(t){return t.getters["management/canList"](a.W8.APP)?o.canPagination(t)?t.dispatch("management/findPage",{type:a.W8.APP,opt:{pagination:new n.YU({filters:n.eY.createMultipleFields(i.map(t=>new n.Js({field:"metadata.name",value:t})))})}}):t.dispatch("management/findAll",{type:a.W8.APP}):Promise.resolve([])}static hasCspAdapter({$store:t,apps:e}){return null===e||void 0===e?void 0:e.find(t=>{var e;return i.includes(null===(e=t.metadata)||void 0===e?void 0:e.name)})}}const r=o},83953:(t,e,s)=>{s.d(e,{T:()=>r,p:()=>o});var a=s(95822),n=s(55823);let i=!1;function o(){return i}function r(t){const e=t.getters["management/byId"](n.Mc.SETTING,a.HG.FAVICON),o=t.getters["management/byId"](n.Mc.SETTING,a.HG.BRAND),r=d(document.head.getElementsByTagName("link"));if(r){let t;"suse"===o?.value?t=s(94520):"csp"===o?.value?t=s(43318):"harvester"===o?.value&&(t=s(80270)),r.href=e?.value||t||h,i=!0}}function l(){const t=d(document.head.getElementsByTagName("link"));return t?t.href:""}function d(t){for(let e=0;e<t.length;e++){const s=t[e];if(s.rel?.includes("icon"))return s}}const h=l()}}]);
//# sourceMappingURL=6456.9672ba82.js.map