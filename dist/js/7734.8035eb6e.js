(self["webpackChunkcluster_log_extension"]=self["webpackChunkcluster_log_extension"]||[]).push([[7734],{1457:(e,t,a)=>{var o=a(87179);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=a(99548).A;r("bb134346",o,!0,{sourceMap:!1,shadowMode:!1})},42361:(e,t,a)=>{var o=a(43787);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=a(99548).A;r("599c9cc8",o,!0,{sourceMap:!1,shadowMode:!1})},43787:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var o=a(31601),r=a.n(o),s=a(76314),n=a.n(s),i=a(5111),l=n()(r());l.i(i.A),l.push([e.id,".pin-effect-area[data-v-72b4aeb6]{position:absolute;z-index:997;width:0;height:0;border-style:hidden}.pin-effect-area.right[data-v-72b4aeb6]{right:0;background-image:linear-gradient(to right,var(--drag-over-outer-bg),var(--drag-over-inner-bg));border-left:1px;border-style:hidden hidden hidden dashed}.pin-effect-area.left[data-v-72b4aeb6],.pin-effect-area.right[data-v-72b4aeb6]{top:55px;width:300px;transition:width .5s ease;height:100%}.pin-effect-area.left[data-v-72b4aeb6]{left:0;background-image:linear-gradient(to left,var(--drag-over-outer-bg),var(--drag-over-inner-bg));border-right:1px;border-style:hidden dashed hidden hidden}.pin-effect-area.bottom[data-v-72b4aeb6]{bottom:0;height:270px;transition:height .5s ease;width:100%;background-image:linear-gradient(to top,var(--drag-over-inner-bg),var(--drag-over-outer-bg));border-top:1px;border-style:dashed hidden hidden hidden}.drag-area[data-v-72b4aeb6],.pin-effect-area.center[data-v-72b4aeb6]{width:0;height:0}.drag-area[data-v-72b4aeb6]{position:absolute;z-index:999;opacity:0}.drag-area.center[data-v-72b4aeb6]{top:0;right:0;width:100%;height:100%;z-index:998}.drag-area.right[data-v-72b4aeb6]{top:55px;right:0;width:300px;height:100%}.drag-area.left[data-v-72b4aeb6]{top:55px;left:0;width:300px;height:100%}.drag-area.bottom[data-v-72b4aeb6]{bottom:0;height:270px;width:100%}",""]);const d=l},52128:(e,t,a)=>{var o=a(77122);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=a(99548).A;r("6301066e",o,!0,{sourceMap:!1,shadowMode:!1})},65189:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});const o="pageActions",r={created(){this.updatePageActions();const e=e=>{this.handlePageAction&&this.handlePageAction(e)};this.$store.commit("pageActionHandler",e)},beforeUnmount(){this.pageActions&&this.$store.commit(o,[]),this.$store.commit("clearPageActionHandler")},methods:{updatePageActions(){this.pageActions&&this.$store.commit(o,this.pageActions)}},watch:{pageActions(e,t){this.updatePageActions()}}}},77122:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var o=a(31601),r=a.n(o),s=a(76314),n=a.n(s),i=a(5111),l=n()(r());l.i(i.A),l.push([e.id,".baseline{align-items:baseline}.locale-selector-btn{align-items:center;display:flex}",""]);const d=l},80536:(e,t,a)=>{var o=a(83481);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=a(99548).A;r("25c993ed",o,!0,{sourceMap:!1,shadowMode:!1})},83481:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var o=a(31601),r=a.n(o),s=a(76314),n=a.n(s),i=a(5111),l=n()(r());l.i(i.A),l.push([e.id,".promptrestore-modal[data-v-6fdd9af0]{border-radius:var(--border-radius);overflow:scroll;max-height:100vh}.promptrestore-modal[data-v-6fdd9af0] ::-webkit-scrollbar-corner{background:transparent}.promptrestore-modal .prompt-restore form p[data-v-6fdd9af0]{min-height:16px}.promptrestore-modal .dialog-actions[data-v-6fdd9af0]{display:flex;justify-content:flex-end}.prompt-restore[data-v-6fdd9af0]  .card-wrap .card-actions{display:block}.prompt-restore[data-v-6fdd9af0]  .card-wrap .card-actions button:not(:last-child){margin-right:10px}.prompt-restore[data-v-6fdd9af0]  .card-wrap .card-actions .banner{display:flex}",""]);const d=l},87132:(e,t,a)=>{"use strict";a.d(t,{A:()=>v});var o=a(20641),r=a(53751),s=a(90033);const n={key:0},i={key:1};function l(e,t,a,l,d,c){const u=(0,o.g2)("rc-dropdown-trigger"),p=(0,o.g2)("rc-dropdown-item"),h=(0,o.g2)("rc-dropdown"),g=(0,o.g2)("Select"),v=(0,o.gN)("t");return(0,o.uX)(),(0,o.CE)("div",null,["login"===a.mode?((0,o.uX)(),(0,o.CE)("div",n,[c.showLocale?((0,o.uX)(),(0,o.Wv)(h,{key:0,"aria-label":e.$attrs["aria-label"]||void 0,"aria-labelledby":e.$attrs["aria-labelledby"]||void 0,"aria-describedby":e.$attrs["aria-describedby"]||void 0},{dropdownCollection:(0,o.k6)(()=>[c.showNone?(0,o.bo)(((0,o.uX)(),(0,o.Wv)(p,{key:0,onClick:t[0]||(t[0]=e=>c.switchLocale("none"))},null,512)),[[v,"locale.none"]]):(0,o.Q3)("",!0),t[3]||(t[3]=(0,o.eW)()),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.availableLocales,(e,t)=>((0,o.uX)(),(0,o.Wv)(p,{key:t,lang:t,onClick:(0,r.D$)(e=>c.switchLocale(t),["stop"])},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e),1)]),_:2},1032,["lang","onClick"]))),128))]),default:(0,o.k6)(()=>[(0,o.bF)(u,{"data-testid":"locale-selector",link:"",class:"baseline locale-selector-btn","aria-label":e.t("locale.menu")},(0,o.eX)({default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(e.selectedLocaleLabel)+" ",1)]),_:2},[a.showIcon?{name:"after",fn:(0,o.k6)(()=>[t[2]||(t[2]=(0,o.Lk)("i",{class:"ml-5 icon icon-chevron-down"},null,-1))]),key:"0"}:void 0]),1032,["aria-label"]),t[4]||(t[4]=(0,o.eW)())]),_:1,__:[4]},8,["aria-label","aria-labelledby","aria-describedby"])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",i,[(0,o.bF)(g,{"aria-label":e.$attrs["aria-label"]||void 0,"aria-labelledby":e.$attrs["aria-labelledby"]||void 0,"aria-describedby":e.$attrs["aria-describedby"]||void 0,value:c.selectedOption,options:c.localesOptions,"is-lang-select":!0,"onUpdate:value":t[1]||(t[1]=e=>c.switchLocale(e))},null,8,["aria-label","aria-labelledby","aria-describedby","value","options"])]))])}var d=a(66278),c=a(89303),u=a(49214);const p={name:"LocaleSelector",components:{Select:c.A,RcDropdown:u.Jj,RcDropdownItem:u.s$,RcDropdownTrigger:u.Nq},props:{mode:{type:String,default:""},showIcon:{type:Boolean,default:!0}},data(){return{isLocaleSelectorOpen:!1}},computed:{...(0,d.L8)("i18n",["selectedLocaleLabel","availableLocales"]),localesOptions(){return Object.keys(this.availableLocales).map(e=>({label:this.t(`locale.${e}`),value:e}))},selectedOption(){return Object.keys(this.availableLocales)[Object.values(this.availableLocales).indexOf(this.selectedLocaleLabel)]},showLocale(){return this.availableLocales&&Object.keys(this.availableLocales).length>1||this.dev},showNone(){return!1}},methods:{openLocaleSelector(){this.isLocaleSelectorOpen=!0},closeLocaleSelector(){this.isLocaleSelectorOpen=!1},switchLocale(e){this.$store.dispatch("i18n/switchTo",e),this.closeLocaleSelector()}}};a(52128);var h=a(66262);const g=(0,h.A)(p,[["render",l]]),v=g},87179:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var o=a(31601),r=a.n(o),s=a(76314),n=a.n(s),i=a(5111),l=n()(r());l.i(i.A),l.push([e.id,".side-nav[data-v-5a2e5282]{display:flex;flex-direction:column;position:relative;background-color:var(--nav-bg);border-right:var(--nav-border-size) solid var(--nav-border);overflow-y:auto}.side-nav .nav[data-v-5a2e5282]{flex:1;overflow-y:auto}.side-nav[data-v-5a2e5282]  h6{margin:0;letter-spacing:normal;line-height:15px}.side-nav[data-v-5a2e5282]  h6 A{padding-left:0}.side-nav .tools[data-v-5a2e5282]{display:flex;margin:10px;text-align:center}.side-nav .tools A[data-v-5a2e5282]{align-items:center;border:1px solid var(--border);border-radius:5px;color:var(--body-text);display:flex;justify-content:center;outline:0;flex:1;padding:10px}.side-nav .tools A[data-v-5a2e5282]:hover{background:var(--nav-hover);text-decoration:none}.side-nav .tools A>I[data-v-5a2e5282]{margin-right:4px}.side-nav .tools.router-link-active:not(:hover) A[data-v-5a2e5282]{background-color:var(--nav-active)}.side-nav .version[data-v-5a2e5282]{cursor:default;margin:0 10px 10px 10px}.side-nav .footer[data-v-5a2e5282]{margin:20px;display:flex;flex:0;flex-direction:row}.side-nav .footer[data-v-5a2e5282]>*{flex:1;color:var(--link);text-align:center}.side-nav .footer[data-v-5a2e5282]>:last-child{text-align:right}.side-nav .footer[data-v-5a2e5282]>:first-child{text-align:left}.side-nav .footer .version[data-v-5a2e5282]{cursor:default;margin:0}.side-nav .footer .locale-chooser[data-v-5a2e5282]{cursor:pointer}.flex[data-v-5a2e5282]{display:flex}",""]);const d=l},97734:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>We});var o=a(20641),r=a(90033);const s={class:"dashboard-root"},n=["aria-label"],i=["aria-label"],l=["draggable"];function d(e,t,a,d,c,u){const p=(0,o.g2)("FixedBanner"),h=(0,o.g2)("AwsComplianceBanner"),g=(0,o.g2)("AzureWarning"),v=(0,o.g2)("Header"),b=(0,o.g2)("SideNav"),m=(0,o.g2)("router-view"),f=(0,o.g2)("ActionMenu"),y=(0,o.g2)("PromptRemove"),k=(0,o.g2)("PromptRestore"),S=(0,o.g2)("PromptModal"),w=(0,o.g2)("ModalManager"),A=(0,o.g2)("WindowManager"),L=(0,o.g2)("GrowlManager"),x=(0,o.g2)("SlideInPanelManager"),R=(0,o.g2)("Inactivity"),P=(0,o.g2)("DraggableZone"),$=(0,o.gN)("shortkey");return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(p,{header:!0}),t[19]||(t[19]=(0,o.eW)()),e.managementReady?((0,o.uX)(),(0,o.Wv)(h,{key:0})):(0,o.Q3)("",!0),t[20]||(t[20]=(0,o.eW)()),e.managementReady?((0,o.uX)(),(0,o.Wv)(g,{key:1})):(0,o.Q3)("",!0),t[21]||(t[21]=(0,o.eW)()),e.managementReady?((0,o.uX)(),(0,o.CE)("div",{key:2,class:(0,r.C4)(["dashboard-content",{[u.pinClass]:!0,"dashboard-padding-left":e.showTopLevelMenu}])},[(0,o.bF)(v),t[16]||(t[16]=(0,o.eW)()),e.clusterReady?((0,o.uX)(),(0,o.Wv)(b,{key:0,class:"default-side-nav"})):(0,o.Q3)("",!0),t[17]||(t[17]=(0,o.eW)()),u.clusterAndRouteReady?((0,o.uX)(),(0,o.CE)("main",{key:1,class:"main-layout","aria-label":e.t("layouts.default")},[((0,o.uX)(),(0,o.Wv)(m,{key:e.$route.path,class:"outlet"})),t[7]||(t[7]=(0,o.eW)()),(0,o.bF)(f),t[8]||(t[8]=(0,o.eW)()),(0,o.bF)(y),t[9]||(t[9]=(0,o.eW)()),(0,o.bF)(k),t[10]||(t[10]=(0,o.eW)()),(0,o.bF)(S),t[11]||(t[11]=(0,o.eW)()),(0,o.bF)(w),t[12]||(t[12]=(0,o.eW)()),c.noLocaleShortcut?(0,o.bo)(((0,o.uX)(),(0,o.CE)("button",{key:0,class:"hide",onShortkey:t[0]||(t[0]=e=>u.toggleNoneLocale())},null,544)),[[$,["shift","l"],void 0,{once:!0}]]):(0,o.Q3)("",!0),t[13]||(t[13]=(0,o.eW)()),u.themeShortcut?(0,o.bo)(((0,o.uX)(),(0,o.CE)("button",{key:1,class:"hide",onShortkey:t[1]||(t[1]=e=>u.toggleTheme())},null,544)),[[$,["shift","t"],void 0,{once:!0}]]):(0,o.Q3)("",!0),t[14]||(t[14]=(0,o.eW)()),(0,o.bo)((0,o.Lk)("button",{class:"hide",onShortkey:t[2]||(t[2]=e=>u.wheresMyDebugger())},null,544),[[$,["f8"],void 0,{once:!0}]]),t[15]||(t[15]=(0,o.eW)()),(0,o.bo)((0,o.Lk)("button",{class:"hide",onShortkey:t[3]||(t[3]=(...e)=>u.toggleShell&&u.toggleShell(...e))},null,544),[[$,["`"],void 0,{once:!0}]])],8,n)):u.unmatchedRoute?((0,o.uX)(),(0,o.CE)("main",{key:2,class:"main-layout","aria-label":e.t("layouts.default")},[((0,o.uX)(),(0,o.Wv)(m,{key:e.$route.path,class:"outlet"}))],8,i)):(0,o.Q3)("",!0),t[18]||(t[18]=(0,o.eW)()),e.$refs.draggableZone?((0,o.uX)(),(0,o.CE)("div",{key:3,class:(0,r.C4)(["wm",{"drag-end":!e.$refs.draggableZone.drag.active,"drag-start":e.$refs.draggableZone.drag.active}]),draggable:c.draggable,onDragstart:t[5]||(t[5]=t=>e.$refs.draggableZone.onDragStart(t)),onDragend:t[6]||(t[6]=t=>e.$refs.draggableZone.onDragEnd(t))},[(0,o.bF)(A,{onDraggable:t[4]||(t[4]=e=>c.draggable=e)})],42,l)):(0,o.Q3)("",!0)],2)):(0,o.Q3)("",!0),t[22]||(t[22]=(0,o.eW)()),(0,o.bF)(p,{footer:!0}),t[23]||(t[23]=(0,o.eW)()),(0,o.bF)(L),t[24]||(t[24]=(0,o.eW)()),(0,o.bF)(x),t[25]||(t[25]=(0,o.eW)()),(0,o.bF)(R),t[26]||(t[26]=(0,o.eW)()),(0,o.bF)(P,{ref:"draggableZone"},null,512)])}var c=a(66278),u=a(86691),p=a(86311),h=a(50946),g=a(20837),v=a(83428),b=a(7612),m=a(18833);const f={class:"text-default-text"},y={class:"pl-10 pr-10"},k={key:0},S={class:"dialog-actions"};function w(e,t,a,s,n,i){const l=(0,o.g2)("LabeledSelect"),d=(0,o.g2)("Date"),c=(0,o.g2)("RadioGroup"),u=(0,o.g2)("AsyncButton"),p=(0,o.g2)("Banner"),h=(0,o.g2)("Card"),g=(0,o.g2)("app-modal"),v=(0,o.gN)("clean-html"),b=(0,o.gN)("t");return n.loaded?((0,o.uX)(),(0,o.Wv)(g,{key:0,"custom-class":"promptrestore-modal",name:"promptRestore",styles:"background-color: var(--nav-bg); border-radius: var(--border-radius); max-height: 100vh;",height:"auto",scrollable:!0,"trigger-focus-trap":!0,onClose:i.close},{default:(0,o.k6)(()=>[n.loaded?((0,o.uX)(),(0,o.Wv)(h,{key:0,class:"prompt-restore","show-highlight-border":!1},{title:(0,o.k6)(()=>[(0,o.bo)((0,o.Lk)("h4",f,null,512),[[v,e.t("promptRestore.title",null,!0)]])]),body:(0,o.k6)(()=>[(0,o.Lk)("div",y,[(0,o.Lk)("form",null,[(0,o.bo)((0,o.Lk)("h3",null,null,512),[[b,"promptRestore.name"]]),t[3]||(t[3]=(0,o.eW)()),i.isCluster?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",k,(0,r.v_)(i.snapshot.nameDisplay),1)),t[4]||(t[4]=(0,o.eW)()),i.isCluster?((0,o.uX)(),(0,o.Wv)(l,{key:1,value:n.selectedSnapshot,"onUpdate:value":t[0]||(t[0]=e=>n.selectedSnapshot=e),label:e.t("promptRestore.label"),placeholder:e.t("promptRestore.placeholder"),options:i.clusterSnapshots},null,8,["value","label","placeholder","options"])):(0,o.Q3)("",!0),t[5]||(t[5]=(0,o.eW)()),t[6]||(t[6]=(0,o.Lk)("div",{class:"spacer"},null,-1)),t[7]||(t[7]=(0,o.eW)()),(0,o.bo)((0,o.Lk)("h3",null,null,512),[[b,"promptRestore.date"]]),t[8]||(t[8]=(0,o.eW)()),(0,o.Lk)("div",null,[(0,o.Lk)("p",null,[i.snapshot?((0,o.uX)(),(0,o.Wv)(d,{key:0,value:i.snapshot.createdAt||i.snapshot.created||i.snapshot.metadata.creationTimestamp},null,8,["value"])):(0,o.Q3)("",!0)])]),t[9]||(t[9]=(0,o.eW)()),t[10]||(t[10]=(0,o.Lk)("div",{class:"spacer"},null,-1)),t[11]||(t[11]=(0,o.eW)()),(0,o.bF)(c,{value:n.restoreMode,"onUpdate:value":t[1]||(t[1]=e=>n.restoreMode=e),name:"restoreMode",label:"Restore Type",labels:["Only etcd","Kubernetes version and etcd","Cluster config, Kubernetes version and etcd"],options:i.restoreModeOptions},null,8,["value","options"])])])]),actions:(0,o.k6)(()=>[(0,o.Lk)("div",S,[(0,o.Lk)("button",{class:"btn role-secondary",onClick:t[2]||(t[2]=(...e)=>i.close&&i.close(...e))},(0,r.v_)(e.t("generic.cancel")),1),t[12]||(t[12]=(0,o.eW)()),(0,o.bF)(u,{mode:"restore",disabled:!i.hasSnapshot,onClick:i.apply},null,8,["disabled","onClick"]),t[13]||(t[13]=(0,o.eW)()),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.errors,(e,t)=>((0,o.uX)(),(0,o.Wv)(p,{key:t,color:"error",label:e},null,8,["label"]))),128))])]),_:1,__:[14,15]})):(0,o.Q3)("",!0)]),_:1},8,["onClose"])):(0,o.Q3)("",!0)}var A=a(72268),L=a(40949),x=a(14492),R=a(36124),P=a(50484),$=a(85158),E=a(37447),W=a(55823),C=a(6826),M=a(88198),_=a(72140),I=a(74353),N=a.n(I),T=a(18561),D=a(33852),F=a(76365);const X={components:{Card:L.Z,AsyncButton:A.A,Banner:x.l,Date:R["default"],LabeledSelect:$.A,RadioGroup:P.A,AppModal:F.h},name:"PromptRestore",mixins:[M.Ay],data(){return{errors:[],labels:{},restoreMode:"all",loaded:!1,allSnapshots:{},sortedSnapshots:[],selectedSnapshot:null}},computed:{...(0,c.aH)("action-menu",["showPromptRestore","toRestore"]),...(0,c.L8)({t:"i18n/t"}),isCluster(){const e=this.toRestore[0]?.type.toLowerCase()===W.xO;return!e},snapshot(){return this.isCluster?this.allSnapshots[this.selectedSnapshot]:this.toRestore[0]},hasSnapshot(){return!!this.snapshot},isRke2(){return!!this.snapshot?.rke2},clusterSnapshots(){return this.sortedSnapshots?this.sortedSnapshots.map(e=>({label:this.snapshotLabel(e),value:e.name})):[]},restoreModeOptions(){return["none","kubernetesVersion","all"]}},watch:{async showPromptRestore(e){e?(this.loaded=!0,await this.fetchSnapshots(),this.selectDefaultSnapshot()):this.loaded=!1}},methods:{close(){this.errors=[],this.labels={},this.$store.commit("action-menu/togglePromptRestore"),this.selectedSnapshot=null},async fetchSnapshots(){if(!this.isCluster)return;const e=this.toRestore?.[0],t=this.$store.dispatch("management/findAll",{type:W.xO}).then(t=>{const a=e?.clusterName||e?.metadata?.name;return t.filter(e=>e?.snapshotFile?.status===D.jv.SUCCESSFUL&&e.clusterName===a)}),a=await t.then(e=>e.reduce((e,t)=>(e[t.name]=t,e),{})).catch(e=>{this.errors=(0,E.rz)(e)});this.allSnapshots=a,this.sortedSnapshots=(0,T.Ul)(Object.values(this.allSnapshots),["snapshotFile.createdAt","created","metadata.creationTimestamp"],!0)},selectDefaultSnapshot(){if(this.selectedSnapshot)return;const e=this.toRestore[0]?.type===W.xO?this.toRestore[0].name:this.clusterSnapshots[0]?.value;this["selectedSnapshot"]=e},async apply(e){try{const t=this.$store.getters["management/byId"](W.qt.RANCHER_CLUSTER,this.snapshot.clusterId);await this.applyHooks(M.Fm);const a=t.spec?.rkeConfig?.etcdSnapshotRestore?.generation||0;(0,C.set)(t,"spec.rkeConfig.etcdSnapshotRestore",{generation:a+1,name:this.snapshot.name,restoreRKEConfig:this.restoreMode}),await t.save(),this.$store.dispatch("growl/success",{title:this.t("promptRestore.notification.title"),message:this.t("promptRestore.notification.message",{selectedSnapshot:this.selectedSnapshot})},{root:!0}),e(!0),this.close()}catch(t){this.errors=(0,E.rz)(t),e(!1)}},snapshotLabel(e){const t=(0,_.ZD)(this.$store.getters["prefs/get"](u.DATE_FORMAT)),a=(0,_.ZD)(this.$store.getters["prefs/get"](u.TIME_FORMAT)),o=e.createdAt||e.created||e.metadata.creationTimestamp,r=N()(o).format(t),s=N()(o).format(a);return`${r} ${s} : ${e.nameDisplay}`}}};a(80536);var O=a(66262);const G=(0,O.A)(X,[["render",w],["__scopeId","data-v-6fdd9af0"]]),Q=G;var U=a(93298),V=a(86209),H=a(1950),z=a(8243),Z=a(58564),j=a(57600),B=a(64414);const K={key:0};function q(e,t,a,s,n,i){return e.drag.active?((0,o.uX)(),(0,o.CE)("div",K,[e.drag.zone!=e.pin?((0,o.uX)(),(0,o.CE)("span",{key:0,class:(0,r.C4)(["pin-effect-area",e.drag.zone])},null,2)):(0,o.Q3)("",!0),t[4]||(t[4]=(0,o.eW)()),(0,o.Lk)("span",{class:"drag-area center",onDragover:t[0]||(t[0]=t=>e.onDragOver(t,"center"))},null,32),t[5]||(t[5]=(0,o.eW)()),(0,o.Lk)("span",{class:"drag-area right",onDragover:t[1]||(t[1]=t=>e.onDragOver(t,"right"))},null,32),t[6]||(t[6]=(0,o.eW)()),(0,o.Lk)("span",{class:"drag-area bottom",onDragover:t[2]||(t[2]=t=>e.onDragOver(t,"bottom"))},null,32),t[7]||(t[7]=(0,o.eW)()),(0,o.Lk)("span",{class:"drag-area left",onDragover:t[3]||(t[3]=t=>e.onDragOver(t,"left"))},null,32)])):(0,o.Q3)("",!0)}var Y=a(93914);const J=(0,o.pM)({data(){return{drag:{active:!1,zone:Y.Q7}}},computed:{...(0,c.aH)("wm",["userPin"]),pin:{get(){return this.userPin},set(e){e!==Y.Q7&&(window.localStorage.setItem("wm-pin",e),this.$store.commit("wm/setUserPin",e))}}},methods:{onDragStart(){this.drag.active=!0},onDragOver(e,t){this.drag.zone=t,t!==Y.Q7&&e.preventDefault()},onDragEnd(){this.pin=this.drag.zone,this.drag={active:!1,zone:Y.Q7}}}});a(42361);const ee=(0,O.A)(J,[["render",q],["__scopeId","data-v-72b4aeb6"]]),te=ee;var ae=a(75317),oe=a(65189),re=a(78437),se=a(65524);const ne=["aria-label"],ie={class:"nav"},le={key:0,class:"footer"},de={class:"clip version text-muted"},ce={key:1,class:"version text-muted flex"},ue={key:0,class:"clip text-muted ml-5"};function pe(e,t,a,s,n,i){const l=(0,o.g2)("Group"),d=(0,o.g2)("router-link"),c=(0,o.g2)("LocaleSelector"),u=(0,o.gN)("clean-tooltip");return(0,o.uX)(),(0,o.CE)("nav",{class:"side-nav",role:"navigation","aria-label":e.t("nav.ariaLabel.sideNav")},[(0,o.Lk)("div",ie,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.groups,e=>((0,o.uX)(),(0,o.Wv)(l,{key:e.name,ref_for:!0,ref:"groups","id-prefix":"",class:"package",group:e,"can-collapse":!e.isRoot,"show-header":!e.isRoot,onSelected:t[0]||(t[0]=e=>i.groupSelected(e)),onExpand:t[1]||(t[1]=e=>i.groupSelected(e))},null,8,["group","can-collapse","show-header"]))),128))]),t[4]||(t[4]=(0,o.eW)()),i.showProductFooter?((0,o.uX)(),(0,o.CE)("div",le,[(0,o.bF)(d,{to:i.supportLink,class:"pull-right",role:"link","aria-label":e.t("nav.support",{hasSupport:!0})},{default:(0,o.k6)(()=>[(0,o.eW)((0,r.v_)(e.t("nav.support",{hasSupport:!0})),1)]),_:1},8,["to","aria-label"]),t[2]||(t[2]=(0,o.eW)()),(0,o.bo)(((0,o.uX)(),(0,o.CE)("span",de,[(0,o.eW)((0,r.v_)(i.displayVersion),1)])),[[u,{content:i.displayVersion,placement:"top"}]]),t[3]||(t[3]=(0,o.eW)()),e.isSingleProduct&&e.hasMultipleLocales&&!e.isStandaloneHarvester?((0,o.uX)(),(0,o.Wv)(c,{key:0,mode:"login","show-icon":!1})):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",ce,[i.singleProductAbout?((0,o.uX)(),(0,o.Wv)(d,{key:0,to:i.singleProductAbout,role:"link","aria-label":e.t("nav.ariaLabel.productAboutPage")},{default:(0,o.k6)(()=>[(0,o.eW)((0,r.v_)(i.displayVersion),1)]),_:1},8,["to","aria-label"])):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[e.isVirtualCluster&&e.isExplorer?(0,o.bo)(((0,o.uX)(),(0,o.CE)("span",ue,[(0,o.eW)("\n          (Harvester-"+(0,r.v_)(i.harvesterVersion)+")\n        ",1)])),[[u,{content:i.harvesterVersion,placement:"top"}]]):(0,o.Q3)("",!0)],64))]))],8,ne)}var he=a(38221),ge=a.n(he),ve=a(2404),be=a.n(ve),me=a(65843),fe=a(71883),ye=a(18727),ke=a(84010),Se=a(29066),we=a(96510),Ae=a(87132);const Le={name:"SideNav",components:{Group:we.A,LocaleSelector:Ae.A},data(){return{groups:[],gettingGroups:!1}},created(){this.queueUpdate=ge()(this.getGroups,500),this.getGroups()},mounted(){this.$nextTick(()=>this.syncNav())},watch:{allSchemasIds(e,t){(0,me.P1)(e,t)||this.queueUpdate()},allNavLinksIds(e,t){(0,me.P1)(e,t)||this.queueUpdate()},favoriteTypes(e,t){be()(e,t)||this.queueUpdate()},locale(e,t){be()(e,t)||this.getGroups()},namespaceMode(e,t){e!==t&&this.queueUpdate()},namespaces(e,t){be()(e,t)||this.queueUpdate()},clusterReady(e,t){be()(e,t)||this.getGroups()},rootProduct(e,t){e?.name!==t?.name&&this.getGroups()},$route(e,t){this.$nextTick(()=>this.syncNav())}},computed:{...(0,c.aH)(["managementReady","clusterReady"]),...(0,c.L8)(["isStandaloneHarvester","productId","clusterId","currentProduct","rootProduct","isSingleProduct","namespaceMode","isExplorer","isVirtualCluster"]),...(0,c.L8)({locale:"i18n/selectedLocaleLabel",hasMultipleLocales:"i18n/hasMultipleLocales"}),...(0,c.L8)("type-map",["activeProducts"]),favoriteTypes:(0,u.mapPref)(u.FAVORITE_TYPES),supportLink(){const e=this.rootProduct;return e?.supportRoute?{...e.supportRoute,params:{...e.supportRoute.params,cluster:this.clusterId}}:{name:`c-cluster-${e?.name}-support`}},displayVersion(){if(this.isSingleProduct?.getVersionInfo)return this.isSingleProduct?.getVersionInfo(this.$store);const{displayVersion:e}=(0,ae.hQ)(this.$store);return e},singleProductAbout(){return this.isSingleProduct?.aboutPage},harvesterVersion(){return this.$store.getters["cluster/byId"](W.rk.SETTING,"server-version")?.value||"unknown"},showProductFooter(){return!!this.isVirtualProduct},isVirtualProduct(){return this.rootProduct.name===fe.T3},allNavLinks(){return this.clusterId&&this.$store.getters["cluster/schemaFor"](W.UI.NAV_LINK)?this.$store.getters["cluster/all"](W.UI.NAV_LINK):[]},allSchemasIds(){const e=this.managementReady,t=this.currentProduct;return e&&t?this.$store.getters[`${t.inStore}/all`](W.yx).map(e=>e.id).sort():[]},namespaces(){return this.$store.getters["activeNamespaceCache"]},allNavLinksIds(){return this.allNavLinks.map(e=>e.id)}},methods:{getGroups(){if(this.gettingGroups)return;if(this.gettingGroups=!0,!this.clusterReady)return(0,me.IU)(this.groups),void(this.gettingGroups=!1);const e=this.$store.getters["productId"],t="both",a=[],o=this.isExplorer?[ye.NAME]:[],r=this.activeProducts.reduce((e,t)=>({...e,[t.name]:t}),{});if(this.isExplorer)for(const s of this.activeProducts)"cluster"===s.inStore&&(0,me.PG)(o,s.name);(0,me.PG)(o,e),this.getProductsGroups(a,o,t,r),this.getExplorerGroups(a),(0,me.bG)(this.groups,...(0,T.Ul)(a,["weight:desc","label"])),this.gettingGroups=!1},getProductsGroups(e,t,a,o){const r=this.$store.getters["clusterId"],s=this.$route.params.resource||"";for(const n of t){const t=[ke.TYPE_MODES.BASIC];if(n===Se.NAME)continue;n===ye.NAME&&(t.push(ke.TYPE_MODES.FAVORITE),t.push(ke.TYPE_MODES.USED));const i=this.$store.getters["type-map/allTypes"](n,t);for(const l of t){const t=i[l]||{},d=this.$store.getters["type-map/getTree"](n,l,t,r,a,s);if(n!==ye.NAME&&this.isExplorer){const t=d.find(e=>"root"===e.name),a=d.filter(e=>"root"!==e.name),r={name:n,label:this.$store.getters["i18n/withFallback"](`product.${n}`,null,(0,_.TF)(n)),children:[...t?.children||[],...a],weight:o[n]?.weight||0};(0,me.PG)(e,r)}else(0,me.cn)(e,d)}}},getExplorerGroups(e){if(this.isExplorer){const t=this.allNavLinks,a=[],o={};for(const e of t){if(!e.link)continue;const t=e.spec.group,r=e.normalizedGroup,s={name:`link-${e._key}`,link:e.link,target:e.actualTarget,label:e.labelDisplay,sideLabel:e.spec.sideLabel,iconSrc:e.spec.iconSrc,description:e.spec.description};if(r){if(o[r])continue;o[r]=!0,a.push({name:`navlink-group-${r}`,label:t,isRoot:!0,children:[{name:`navlink-child-${r}`,label:t,route:{name:"c-cluster-navlinks-group",params:{cluster:this.clusterId,group:r}}}],weight:-100})}else a.push({name:`navlink-${s.name}`,label:s.label,isRoot:!0,children:[s],weight:-100})}(0,me.cn)(e,a)}},groupSelected(e){this.$refs.groups.forEach(t=>{t.canCollapse&&(t.isExpanded=t.group.name===e.name)})},collapseAll(){this.$refs.groups.forEach(e=>{e.isExpanded=!1})},syncNav(){const e=this.$refs.groups;if(e){let t=!0;const a=e.filter(e=>e.isExpanded)[0];if(a&&a.hasActiveRoute())return void this.$nextTick(()=>a.syncNav());e.forEach(e=>{if(!e.group.isRoot&&(e.isExpanded=!1,t)){const a=e.hasActiveRoute();a&&(e.isExpanded=!0,t=!1,this.$nextTick(()=>e.syncNav()))}})}}}};a(1457);const xe=(0,O.A)(Le,[["render",pe],["__scopeId","data-v-5a2e5282"]]),Re=xe,Pe="set-as-login",$e={components:{PromptRemove:m.A,PromptRestore:Q,PromptModal:U.A,Header:V.A,ActionMenu:p.A,GrowlManager:h.A,ModalManager:g.A,SlideInPanelManager:v.A,WindowManager:b["default"],FixedBanner:Z.A,AwsComplianceBanner:j.A,AzureWarning:B.A,DraggableZone:te,Inactivity:H.A,SideNav:Re},mixins:[oe.A,z.A,re.A],data(){return{noLocaleShortcut:!1,wantNavSync:!1,unwatchPin:void 0,wmPin:null,draggable:!1}},computed:{...(0,c.aH)(["managementReady","clusterReady"]),...(0,c.L8)(["clusterId","currentProduct","rootProduct","isRancherInHarvester","showTopLevelMenu"]),afterLoginRoute:(0,u.mapPref)(u.AFTER_LOGIN_ROUTE),themeShortcut:(0,u.mapPref)(u.THEME_SHORTCUT),pageActions(){const e=[],t=this.rootProduct;if(!t)return[];const a="cluster"===t.inStore||"management"===t.inStore&&"configuration"!==t.category||this.isRancherInHarvester;return a&&e.push({label:this.t("nav.header.setLoginPage"),action:Pe}),e},unmatchedRoute(){return!this.$route?.matched?.length},clusterAndRouteReady(){const e=this.$store.getters["targetRoute"],t=e?this.currentProduct?.name===(0,se.P)(this.$route)&&this.currentProduct?.name===(0,se.P)(e):this.currentProduct?.name===(0,se.P)(this.$route);return this.clusterReady&&this.clusterId===(0,se.Ij)(this.$route)&&t},pinClass(){return`pin-${this.wmPin}`}},mounted(){this.wmPin=window.localStorage.getItem("wm-pin")||Y._N,this.$refs.draggableZone.pin=this.wmPin,this.unwatchPin=this.$watch("$refs.draggableZone.pin",e=>{this.wmPin=e})},unmounted(){this.unwatchPin()},methods:{handlePageAction(e){e.action===Pe&&(this.afterLoginRoute=this.getLoginRoute(),(0,ae.FM)(this.$store))},getLoginRoute(){return{name:this.$route.name,params:this.$route.params}},toggleNoneLocale(){this.$store.dispatch("i18n/toggleNone")},toggleTheme(){this.$store.dispatch("prefs/toggleTheme")},wheresMyDebugger(){},async toggleShell(){const e=this.$route.params.cluster;if(!e)return;const t=await this.$store.dispatch("management/find",{type:W.Mc.CLUSTER,id:e});t&&t.openShell()}}},Ee=(0,O.A)($e,[["render",d]]),We=Ee}}]);
//# sourceMappingURL=7734.8035eb6e.js.map