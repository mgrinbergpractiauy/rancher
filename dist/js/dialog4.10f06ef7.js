(self["webpackChunkcluster_log_extension"]=self["webpackChunkcluster_log_extension"]||[]).push([[4917],{27268:(e,a,s)=>{var t=s(58306);t.__esModule&&(t=t.default),"string"===typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals);var o=s(99548).A;o("00d6cff2",t,!0,{sourceMap:!1,shadowMode:!1})},40986:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>x});var t=s(20641),o=s(90033);const n={class:"modal-dialog"},d={class:"mb-20"},i={key:0,class:"mb-15"},r={key:0,class:"checkbox-info"},l={class:"mb-15"},p={key:0,class:"checkbox-info"},c={class:"dialog-buttons mt-20"};function u(e,a,s,u,h,f){const R=(0,t.g2)("Checkbox"),g=(0,t.g2)("AsyncButton");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.Lk)("h4",null,(0,o.v_)(e.t("plugins.addRepos.title")),1),a[6]||(a[6]=(0,t.eW)()),(0,t.Lk)("p",d,(0,o.v_)(e.t("plugins.addRepos.prompt",{},!0)),1),a[7]||(a[7]=(0,t.eW)()),h.prime?((0,t.uX)(),(0,t.CE)("div",i,[(0,t.bF)(R,{value:h.addRepos.official,"onUpdate:value":a[0]||(a[0]=e=>h.addRepos.official=e),disabled:e.$fetchState.pending||f.hasRancherUIPluginsRepo,primary:!0,"label-key":"plugins.setup.install.addRancherRepo","data-testid":"add-extensions-repos-modal-add-official-repo"},null,8,["value","disabled"]),a[3]||(a[3]=(0,t.eW)()),f.hasRancherUIPluginsRepo?((0,t.uX)(),(0,t.CE)("div",r,"\n        ("+(0,o.v_)(e.t("plugins.setup.installed"))+")\n      ",1)):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0),a[8]||(a[8]=(0,t.eW)()),(0,t.Lk)("div",l,[(0,t.bF)(R,{value:h.addRepos.partners,"onUpdate:value":a[1]||(a[1]=e=>h.addRepos.partners=e),disabled:e.$fetchState.pending||f.hasRancherUIPartnersPluginsRepo,primary:!0,"label-key":"plugins.setup.install.addPartnersRancherRepo","data-testid":"add-extensions-repos-modal-add-partners-repo"},null,8,["value","disabled"]),a[4]||(a[4]=(0,t.eW)()),f.hasRancherUIPartnersPluginsRepo?((0,t.uX)(),(0,t.CE)("div",p,"\n        ("+(0,o.v_)(e.t("plugins.setup.installed"))+")\n      ",1)):(0,t.Q3)("",!0)]),a[9]||(a[9]=(0,t.eW)()),(0,t.Lk)("div",c,[(0,t.Lk)("button",{class:"btn role-secondary",onClick:a[2]||(a[2]=a=>e.$emit("close"))},(0,o.v_)(e.t("generic.cancel")),1),a[5]||(a[5]=(0,t.eW)()),(0,t.bF)(g,{mode:"add",class:"ml-10",onClick:f.doAddRepos},null,8,["onClick"])])])}var h=s(72268),f=s(54012),R=s(55823),g=s(62428),m=s(68710),b=s(96763);const v={emits:["close"],components:{AsyncButton:h.A,Checkbox:f.A},props:{done:{type:Function,default:()=>{}}},async fetch(){this.$store.getters["management/schemaFor"](R.W8.CLUSTER_REPO)&&(this.repos=await this.$store.dispatch("management/findAll",{type:R.W8.CLUSTER_REPO,opt:{force:!0}})),this.addRepos.official=(0,m.f$)()&&!this.hasRancherUIPluginsRepo,this.addRepos.partners=!this.hasRancherUIPartnersPluginsRepo},data(){return{errors:[],repos:[],prime:(0,m.f$)(),addRepos:{official:!1,partners:!1},reposInfo:{official:{repo:void 0,name:g.AW.OFFICIAL.NAME,url:g.AW.OFFICIAL.URL,branch:g.AW.OFFICIAL.BRANCH},partners:{repo:void 0,name:g.AW.PARTNERS.NAME,url:g.AW.PARTNERS.URL,branch:g.AW.PARTNERS.BRANCH}},isDialogActive:!1,returnFocusSelector:'[data-testid="extensions-page-menu"]'}},computed:{hasRancherUIPluginsRepo(){return!!this.repos.find(e=>e.urlDisplay===g.AW.OFFICIAL.URL)},hasRancherUIPartnersPluginsRepo(){return!!this.repos.find(e=>e.urlDisplay===g.AW.PARTNERS.URL)}},methods:{async doAddRepos(e){this.errors=[];const a=[];for(const s in this.addRepos)if(this.addRepos[s]){const e=await this.$store.dispatch("management/create",{type:R.W8.CLUSTER_REPO,metadata:{name:this.reposInfo[s].name},spec:{gitBranch:this.reposInfo[s].branch,gitRepo:this.reposInfo[s].url}});a.push(e.save())}if(a.length){const e=await Promise.allSettled(a);e.forEach(e=>{"rejected"===e.status&&(b.error(e.reason),this.errors.push(e.reason))})}this.done(),this.$emit("close"),e(!0)}}};s(27268);var A=s(66262);const k=(0,A.A)(v,[["render",u],["__scopeId","data-v-f59f4db2"]]),x=k},58306:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>l});var t=s(31601),o=s.n(t),n=s(76314),d=s.n(n),i=s(5111),r=d()(o());r.i(i.A),r.push([e.id,".modal-dialog[data-v-f59f4db2]{padding:10px}.modal-dialog h4[data-v-f59f4db2]{font-weight:700}.modal-dialog .enable-plugin-support[data-v-f59f4db2]{font-size:14px;margin-top:20px}.modal-dialog .plugin-setup-error[data-v-f59f4db2]{font-size:14px;color:var(--error);margin:10px 0 0 0}.modal-dialog .checkbox-info[data-v-f59f4db2]{margin-left:20px;opacity:.7}.modal-dialog .dialog-buttons[data-v-f59f4db2]{display:flex;justify-content:flex-end;margin-top:10px}.modal-dialog .dialog-buttons[data-v-f59f4db2]>:not(:last-child){margin-right:10px}",""]);const l=r}}]);
//# sourceMappingURL=dialog4.10f06ef7.js.map