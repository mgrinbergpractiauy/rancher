{"version":3,"file":"js/dialog4.10f06ef7.js","mappings":"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","sources":["webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/AddExtensionReposDialog.vue?646f","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/AddExtensionReposDialog.vue","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/AddExtensionReposDialog.vue?9ac9","webpack://cluster-log-extension/./node_modules/@rancher/shell/dialog/AddExtensionReposDialog.vue?eb15"],"sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../vue-loader/dist/stylePostLoader.js!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../sass-loader/dist/cjs.js??clonedRuleSet-22.use[4]!../../../cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../vue-loader/dist/index.js??ruleSet[0].use[1]!./AddExtensionReposDialog.vue?vue&type=style&index=0&id=f59f4db2&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"00d6cff2\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","<script>\nimport AsyncButton from '@shell/components/AsyncButton';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\nimport { CATALOG } from '@shell/config/types';\nimport { UI_PLUGINS_REPOS } from '@shell/config/uiplugins';\nimport { isRancherPrime } from '@shell/config/version';\n\nexport default {\n  emits: ['close'],\n\n  components: { AsyncButton, Checkbox },\n\n  props: {\n    /**\n     * Callback to update install status on extensions main screen\n     */\n    done: {\n      type:    Function,\n      default: () => {}\n    },\n  },\n\n  async fetch() {\n    if (this.$store.getters['management/schemaFor'](CATALOG.CLUSTER_REPO)) {\n      this.repos = await this.$store.dispatch('management/findAll', { type: CATALOG.CLUSTER_REPO, opt: { force: true } });\n    }\n\n    this.addRepos.official = isRancherPrime() && !this.hasRancherUIPluginsRepo;\n    this.addRepos.partners = !this.hasRancherUIPartnersPluginsRepo;\n  },\n\n  data() {\n    return {\n      errors:   [],\n      repos:    [],\n      prime:    isRancherPrime(),\n      addRepos: {\n        official: false,\n        partners: false\n      },\n      reposInfo: {\n        official: {\n          repo:   undefined,\n          name:   UI_PLUGINS_REPOS.OFFICIAL.NAME,\n          url:    UI_PLUGINS_REPOS.OFFICIAL.URL,\n          branch: UI_PLUGINS_REPOS.OFFICIAL.BRANCH,\n        },\n        partners: {\n          repo:   undefined,\n          name:   UI_PLUGINS_REPOS.PARTNERS.NAME,\n          url:    UI_PLUGINS_REPOS.PARTNERS.URL,\n          branch: UI_PLUGINS_REPOS.PARTNERS.BRANCH,\n        }\n      },\n      isDialogActive:      false,\n      returnFocusSelector: '[data-testid=\"extensions-page-menu\"]'\n    };\n  },\n\n  computed: {\n    hasRancherUIPluginsRepo() {\n      return !!this.repos.find((r) => r.urlDisplay === UI_PLUGINS_REPOS.OFFICIAL.URL);\n    },\n    hasRancherUIPartnersPluginsRepo() {\n      return !!this.repos.find((r) => r.urlDisplay === UI_PLUGINS_REPOS.PARTNERS.URL);\n    }\n  },\n\n  methods: {\n    async doAddRepos(btnCb) {\n      this.errors = [];\n      const promises = [];\n\n      for (const key in this.addRepos) {\n        if (this.addRepos[key]) {\n          const pluginCR = await this.$store.dispatch('management/create', {\n            type:     CATALOG.CLUSTER_REPO,\n            metadata: { name: this.reposInfo[key].name },\n            spec:     {\n              gitBranch: this.reposInfo[key].branch,\n              gitRepo:   this.reposInfo[key].url,\n            }\n          });\n\n          promises.push(pluginCR.save());\n        }\n      }\n\n      if (promises.length) {\n        const res = await Promise.allSettled(promises);\n\n        res.forEach((result) => {\n          if (result.status === 'rejected') {\n            console.error(result.reason); // eslint-disable-line no-console\n\n            this.errors.push(result.reason);\n          }\n        });\n      }\n\n      this.done();\n      this.$emit('close');\n\n      btnCb(true);\n    },\n  }\n};\n</script>\n\n<template>\n  <div class=\"modal-dialog\">\n    <h4>\n      {{ t('plugins.addRepos.title') }}\n    </h4>\n    <p class=\"mb-20\">\n      {{ t('plugins.addRepos.prompt', {}, true) }}\n    </p>\n    <!-- Official repo -->\n    <div\n      v-if=\"prime\"\n      class=\"mb-15\"\n    >\n      <Checkbox\n        v-model:value=\"addRepos.official\"\n        :disabled=\"$fetchState.pending || hasRancherUIPluginsRepo\"\n        :primary=\"true\"\n        label-key=\"plugins.setup.install.addRancherRepo\"\n        data-testid=\"add-extensions-repos-modal-add-official-repo\"\n      />\n      <div\n        v-if=\"hasRancherUIPluginsRepo\"\n        class=\"checkbox-info\"\n      >\n        ({{ t('plugins.setup.installed') }})\n      </div>\n    </div>\n    <!-- Partners repo -->\n    <div\n      class=\"mb-15\"\n    >\n      <Checkbox\n        v-model:value=\"addRepos.partners\"\n        :disabled=\"$fetchState.pending || hasRancherUIPartnersPluginsRepo\"\n        :primary=\"true\"\n        label-key=\"plugins.setup.install.addPartnersRancherRepo\"\n        data-testid=\"add-extensions-repos-modal-add-partners-repo\"\n      />\n      <div\n        v-if=\"hasRancherUIPartnersPluginsRepo\"\n        class=\"checkbox-info\"\n      >\n        ({{ t('plugins.setup.installed') }})\n      </div>\n    </div>\n    <div class=\"dialog-buttons mt-20\">\n      <button\n        class=\"btn role-secondary\"\n        @click=\"$emit('close')\"\n      >\n        {{ t('generic.cancel') }}\n      </button>\n      <AsyncButton\n        mode=\"add\"\n        class=\"ml-10\"\n        @click=\"doAddRepos\"\n      />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .modal-dialog {\n    padding: 10px;\n\n    h4 {\n      font-weight: bold;\n    }\n\n    .enable-plugin-support {\n      font-size: 14px;\n      margin-top: 20px;\n    }\n\n    .plugin-setup-error {\n      font-size: 14px;\n      color: var(--error);\n      margin: 10px 0 0 0;\n    }\n\n    .checkbox-info {\n      margin-left: 20px;\n      opacity: 0.7;\n    }\n\n    .dialog-buttons {\n      display: flex;\n      justify-content: flex-end;\n      margin-top: 10px;\n\n      > *:not(:last-child) {\n        margin-right: 10px;\n      }\n    }\n  }\n</style>\n","import { render } from \"./AddExtensionReposDialog.vue?vue&type=template&id=f59f4db2&scoped=true\"\nimport script from \"./AddExtensionReposDialog.vue?vue&type=script&lang=js\"\nexport * from \"./AddExtensionReposDialog.vue?vue&type=script&lang=js\"\n\nimport \"./AddExtensionReposDialog.vue?vue&type=style&index=0&id=f59f4db2&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f59f4db2\"]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../../../css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../../vue-loader/dist/stylePostLoader.js!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../../postcss-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../../xterm/css/xterm.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.modal-dialog[data-v-f59f4db2]{padding:10px}.modal-dialog h4[data-v-f59f4db2]{font-weight:700}.modal-dialog .enable-plugin-support[data-v-f59f4db2]{font-size:14px;margin-top:20px}.modal-dialog .plugin-setup-error[data-v-f59f4db2]{font-size:14px;color:var(--error);margin:10px 0 0 0}.modal-dialog .checkbox-info[data-v-f59f4db2]{margin-left:20px;opacity:.7}.modal-dialog .dialog-buttons[data-v-f59f4db2]{display:flex;justify-content:flex-end;margin-top:10px}.modal-dialog .dialog-buttons[data-v-f59f4db2]>:not(:last-child){margin-right:10px}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["content","__esModule","default","module","id","locals","exports","add","class","t","value","addRepos","official","disabled","$fetchState","pending","hasRancherUIPluginsRepo","primary","partners","hasRancherUIPartnersPluginsRepo","$emit","mode","doAddRepos","emits","components","AsyncButton","Checkbox","props","done","type","Function","fetch","this","$store","getters","CLUSTER_REPO","repos","dispatch","opt","force","data","errors","prime","reposInfo","repo","undefined","name","OFFICIAL","NAME","url","URL","branch","BRANCH","PARTNERS","isDialogActive","returnFocusSelector","computed","find","r","urlDisplay","methods","btnCb","promises","key","pluginCR","metadata","spec","gitBranch","gitRepo","push","save","length","res","Promise","allSettled","forEach","result","status","console","error","reason","__exports__","render","___CSS_LOADER_EXPORT___","i"],"ignoreList":[],"sourceRoot":""}